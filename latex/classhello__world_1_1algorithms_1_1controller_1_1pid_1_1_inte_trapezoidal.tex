\doxysection{hello\+\_\+world\+::algorithms\+::controller\+::pid\+::Inte\+Trapezoidal类 参考}
\hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal}{}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal}\index{hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}}


梯形积分优化类  




{\ttfamily \#include $<$pid\+\_\+opt.\+hpp$>$}

\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a9ca799c65218c3a2e3330a541f88c0be}{Inte\+Trapezoidal}} (bool is\+\_\+enabled=true)
\begin{DoxyCompactList}\small\item\em 构造函数，初始化梯形积分优化参数 \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacehello__world_1_1algorithms_1_1controller_a3651797f880533c49c9b90a0961c199d}{State}} \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a8cf08bb315081cc0a13229debb39a357}{set\+Params}} (bool is\+\_\+enabled)
\begin{DoxyCompactList}\small\item\em 设置梯形积分优化参数 \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_ae700d88586383eeeb43a25834f5be1a3}{is\+Legal}} ()
\begin{DoxyCompactList}\small\item\em 检查梯形积分优化参数是否合法 \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a89787230e29cc4b858c45398952eef93}{is\+Enabled}} ()
\begin{DoxyCompactList}\small\item\em 检查是否启用了梯形积分优化 \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a8efa8ae3581ad2dcae6cbb86c2848213}{calc}} (float err, float last\+\_\+err)
\begin{DoxyCompactList}\small\item\em 计算梯形积分优化后的积分误差值 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_ade4897f2c5f2d7f99ab4a1d5b580c3bc}{is\+\_\+enabled\+\_\+}}
\begin{DoxyCompactList}\small\item\em 是否启用梯形积分优化 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
梯形积分优化类 

梯形积分优化的原理是将本次采样的误差值和上次采样的误差值的平均值作为本次采样的积分误差值。
\begin{DoxyItemize}
\item 具体计算公式见{\ttfamily \doxylink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a8efa8ae3581ad2dcae6cbb86c2848213}{calc(float err, float last\+\_\+err)}}。
\item 参数合法性检查见{\ttfamily \doxylink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_ae700d88586383eeeb43a25834f5be1a3}{is\+Legal()}}。
\item 启用判定见{\ttfamily \doxylink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a89787230e29cc4b858c45398952eef93}{is\+Enabled()}}。 
\end{DoxyItemize}

在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00064}{64}} 行定义.



\doxysubsection{构造及析构函数说明}
\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a9ca799c65218c3a2e3330a541f88c0be}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a9ca799c65218c3a2e3330a541f88c0be} 
\index{hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}!InteTrapezoidal@{InteTrapezoidal}}
\index{InteTrapezoidal@{InteTrapezoidal}!hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}}
\doxysubsubsection{\texorpdfstring{InteTrapezoidal()}{InteTrapezoidal()}}
{\footnotesize\ttfamily hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Inte\+Trapezoidal\+::\+Inte\+Trapezoidal (\begin{DoxyParamCaption}\item[{bool}]{is\+\_\+enabled = {\ttfamily true} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



构造函数，初始化梯形积分优化参数 


\begin{DoxyParams}{参数}
{\em is\+\_\+enabled} & 是否启用梯形积分优化，默认为true \\
\hline
\end{DoxyParams}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00071}{71}} 行定义.



\doxysubsection{成员函数说明}
\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a8efa8ae3581ad2dcae6cbb86c2848213}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a8efa8ae3581ad2dcae6cbb86c2848213} 
\index{hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}!calc@{calc}}
\index{calc@{calc}!hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}}
\doxysubsubsection{\texorpdfstring{calc()}{calc()}}
{\footnotesize\ttfamily float hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Inte\+Trapezoidal\+::calc (\begin{DoxyParamCaption}\item[{float}]{err,  }\item[{float}]{last\+\_\+err }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



计算梯形积分优化后的积分误差值 

具体计算公式为：  \[
e_i(k)=\begin{cases}
\left ( e(k)+e(k-1) \right )/2&\text{if} \quad isEnabled()\\
e(k)& others
\end{cases}
\] 
\begin{DoxyParams}{参数}
{\em err} & 本次采样的误差值 \\
\hline
{\em last\+\_\+err} & 上次采样的误差值 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
本次采样的梯形积分优化后的积分误差值。如果没有启用梯形积分优化，则返回本次采样的误差值。 
\end{DoxyReturn}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00110}{110}} 行定义.

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a8efa8ae3581ad2dcae6cbb86c2848213_icgraph}
\end{center}
\end{figure}
\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a89787230e29cc4b858c45398952eef93}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a89787230e29cc4b858c45398952eef93} 
\index{hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}!isEnabled@{isEnabled}}
\index{isEnabled@{isEnabled}!hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}}
\doxysubsubsection{\texorpdfstring{isEnabled()}{isEnabled()}}
{\footnotesize\ttfamily bool hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Inte\+Trapezoidal\+::is\+Enabled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



检查是否启用了梯形积分优化 

\begin{DoxyReturn}{返回}
如果启用了梯形积分优化并且参数合法，则返回true，否则返回false 
\end{DoxyReturn}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00094}{94}} 行定义.

\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_ae700d88586383eeeb43a25834f5be1a3}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_ae700d88586383eeeb43a25834f5be1a3} 
\index{hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}!isLegal@{isLegal}}
\index{isLegal@{isLegal}!hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}}
\doxysubsubsection{\texorpdfstring{isLegal()}{isLegal()}}
{\footnotesize\ttfamily bool hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Inte\+Trapezoidal\+::is\+Legal (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



检查梯形积分优化参数是否合法 

\begin{DoxyReturn}{返回}
始终返回true 
\end{DoxyReturn}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00088}{88}} 行定义.

\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a8cf08bb315081cc0a13229debb39a357}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_a8cf08bb315081cc0a13229debb39a357} 
\index{hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}!setParams@{setParams}}
\index{setParams@{setParams}!hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}}
\doxysubsubsection{\texorpdfstring{setParams()}{setParams()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacehello__world_1_1algorithms_1_1controller_a3651797f880533c49c9b90a0961c199d}{State}} hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Inte\+Trapezoidal\+::set\+Params (\begin{DoxyParamCaption}\item[{bool}]{is\+\_\+enabled }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



设置梯形积分优化参数 


\begin{DoxyParams}{参数}
{\em is\+\_\+enabled} & 是否启用梯形积分优化 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
设置状态，始终返回k\+State\+Ok 
\end{DoxyReturn}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00078}{78}} 行定义.



\doxysubsection{类成员变量说明}
\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_ade4897f2c5f2d7f99ab4a1d5b580c3bc}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_inte_trapezoidal_ade4897f2c5f2d7f99ab4a1d5b580c3bc} 
\index{hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}!is\_enabled\_@{is\_enabled\_}}
\index{is\_enabled\_@{is\_enabled\_}!hello\_world::algorithms::controller::pid::InteTrapezoidal@{hello\_world::algorithms::controller::pid::InteTrapezoidal}}
\doxysubsubsection{\texorpdfstring{is\_enabled\_}{is\_enabled\_}}
{\footnotesize\ttfamily bool hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Inte\+Trapezoidal\+::is\+\_\+enabled\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



是否启用梯形积分优化 



在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00120}{120}} 行定义.

