<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="zh">
  <compounddef id="_b_m_i088_8cpp" kind="file" language="C++">
    <compoundname>BMI088.cpp</compoundname>
    <includes refid="_b_m_i088_8hpp" local="yes">BMI088.hpp</includes>
    <includes local="no">cstring</includes>
    <includes refid="_b_m_i088__reg_8hpp" local="yes">BMI088_reg.hpp</includes>
    <includes refid="assert_8hpp" local="yes">assert.hpp</includes>
    <includes refid="base_8hpp" local="yes">base.hpp</includes>
    <incdepgraph>
      <node id="2">
        <label>BMI088.hpp</label>
        <link refid="_b_m_i088_8hpp"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="8">
        <label>BMI088_reg.hpp</label>
        <link refid="_b_m_i088__reg_8hpp"/>
      </node>
      <node id="1">
        <label>HW-Components/devices/imu/src/BMI088.cpp</label>
        <link refid="_b_m_i088_8cpp"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
      </node>
      <node id="9">
        <label>assert.hpp</label>
        <link refid="assert_8hpp"/>
      </node>
      <node id="10">
        <label>base.hpp</label>
        <link refid="base_8hpp"/>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
      </node>
      <node id="5">
        <label>system.hpp</label>
        <link refid="system_8hpp"/>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="3">
        <label>arm_math.h</label>
      </node>
      <node id="11">
        <label>cmath</label>
      </node>
      <node id="12">
        <label>cstdint</label>
      </node>
      <node id="6">
        <label>cstdlib</label>
      </node>
      <node id="7">
        <label>cstring</label>
      </node>
      <node id="4">
        <label>stm32f4xx_hal.h</label>
      </node>
    </incdepgraph>
    <innernamespace refid="namespacehello__world">hello_world</innernamespace>
    <innernamespace refid="namespacehello__world_1_1devices">hello_world::devices</innernamespace>
    <innernamespace refid="namespacehello__world_1_1devices_1_1imu">hello_world::devices::imu</innernamespace>
    <briefdescription>
<para>: @history : Version Date Author Note V0.9.0 yyyy-mm-dd &lt;author&gt; 1. </para>
    </briefdescription>
    <detaileddescription>
<para>: @history : Version Date Author Note V1.0.0 2023-12-08 Caikunzhen 1.</para>
<para>&lt;note&gt;</para>
<para><simplesect kind="attention"><para>:</para>
</simplesect>
Copyright (c) 2023 Hello World Team, Zhejiang University. All Rights Reserved.</para>
<para>完成第一版测试</para>
<para><simplesect kind="attention"><para>:</para>
</simplesect>
Copyright (c) 2023 Hello World Team, Zhejiang University. All Rights Reserved. </para>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Includes<sp/>------------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Private<sp/>macro<sp/>-------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Private<sp/>constants<sp/>---------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Private<sp/>types<sp/>-------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Private<sp/>variables<sp/>---------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>External<sp/>variables<sp/>--------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Private<sp/>function<sp/>prototypes<sp/>-----------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Includes<sp/>------------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_b_m_i088_8hpp" kindref="compound">BMI088.hpp</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;cstring&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_b_m_i088__reg_8hpp" kindref="compound">BMI088_reg.hpp</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="assert_8hpp" kindref="compound">assert.hpp</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="base_8hpp" kindref="compound">base.hpp</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal"><ref refid="namespacehello__world" kindref="compound">hello_world</ref></highlight></codeline>
<codeline lineno="47"><highlight class="normal">{</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">devices</highlight></codeline>
<codeline lineno="49"><highlight class="normal">{</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">imu</highlight></codeline>
<codeline lineno="51"><highlight class="normal">{</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Private<sp/>macro<sp/>-------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Private<sp/>constants<sp/>---------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55" refid="namespacehello__world_1_1devices_1_1imu_1a19136def24f9f6529f7df46c0625acca" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a19136def24f9f6529f7df46c0625acca" kindref="member">kMaxMultiTransLen</ref><sp/>=<sp/>8u;</highlight></codeline>
<codeline lineno="56" refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref><sp/>=<sp/>0x55;</highlight></codeline>
<codeline lineno="57" refid="namespacehello__world_1_1devices_1_1imu_1af1a33535f593f71f8f97bfe690bba84f" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1af1a33535f593f71f8f97bfe690bba84f" kindref="member">kPaddingData</ref>[<ref refid="namespacehello__world_1_1devices_1_1imu_1a19136def24f9f6529f7df46c0625acca" kindref="member">kMaxMultiTransLen</ref>]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref>,</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref>,</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref>,</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref>,</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref>,</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref>,</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref>,</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref>,</highlight></codeline>
<codeline lineno="66"><highlight class="normal">};</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68" refid="namespacehello__world_1_1devices_1_1imu_1a5a86856961df34d30843390644886532" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a5a86856961df34d30843390644886532" kindref="member">kAccSens</ref>[4]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>3<sp/>*<sp/><ref refid="namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830" kindref="member">kGravAcc</ref><sp/>/<sp/>32768,</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/>6<sp/>*<sp/><ref refid="namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830" kindref="member">kGravAcc</ref><sp/>/<sp/>32768,</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>12<sp/>*<sp/><ref refid="namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830" kindref="member">kGravAcc</ref><sp/>/<sp/>32768,</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/>24<sp/>*<sp/><ref refid="namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830" kindref="member">kGravAcc</ref><sp/>/<sp/>32768,</highlight></codeline>
<codeline lineno="73"><highlight class="normal">};</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75" refid="namespacehello__world_1_1devices_1_1imu_1a0ed80ae63f77153e0821addb336446e2" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a0ed80ae63f77153e0821addb336446e2" kindref="member">kGyroSens</ref>[5]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>2000<sp/>*<sp/><ref refid="namespacehello__world_1aff7ca8b5f1a544cfb645d20c17b2ebcf" kindref="member">kDeg2RadCoff</ref><sp/>/<sp/>32768,</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>1000<sp/>*<sp/><ref refid="namespacehello__world_1aff7ca8b5f1a544cfb645d20c17b2ebcf" kindref="member">kDeg2RadCoff</ref><sp/>/<sp/>32768,</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/>500<sp/>*<sp/><ref refid="namespacehello__world_1aff7ca8b5f1a544cfb645d20c17b2ebcf" kindref="member">kDeg2RadCoff</ref><sp/>/<sp/>32768,</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/>250<sp/>*<sp/><ref refid="namespacehello__world_1aff7ca8b5f1a544cfb645d20c17b2ebcf" kindref="member">kDeg2RadCoff</ref><sp/>/<sp/>32768,</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/>125<sp/>*<sp/><ref refid="namespacehello__world_1aff7ca8b5f1a544cfb645d20c17b2ebcf" kindref="member">kDeg2RadCoff</ref><sp/>/<sp/>32768,</highlight></codeline>
<codeline lineno="81"><highlight class="normal">};</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83" refid="namespacehello__world_1_1devices_1_1imu_1a27ec247e96dea1a69a25048e94e108ee" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a27ec247e96dea1a69a25048e94e108ee" kindref="member">kTempSens</ref><sp/>=<sp/>0.125f;</highlight></codeline>
<codeline lineno="84" refid="namespacehello__world_1_1devices_1_1imu_1a3ca6e2287a6e1578dcae2f9837721962" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a3ca6e2287a6e1578dcae2f9837721962" kindref="member">kTempOffset</ref><sp/>=<sp/>23.0f;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86" refid="namespacehello__world_1_1devices_1_1imu_1af60d7777256f8e7b1383437df9d7c420" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1af60d7777256f8e7b1383437df9d7c420" kindref="member">kWriteSign</ref><sp/>=<sp/>0x00;</highlight></codeline>
<codeline lineno="87" refid="namespacehello__world_1_1devices_1_1imu_1aa8d641907aa367b051e7f14cdea8673c" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1aa8d641907aa367b051e7f14cdea8673c" kindref="member">kReadSign</ref><sp/>=<sp/>0x80;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89" refid="namespacehello__world_1_1devices_1_1imu_1a3e4baaf9203b036df28de0609668d42f" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a3e4baaf9203b036df28de0609668d42f" kindref="member">kGyroRawDataLen</ref><sp/>=<sp/>6u;</highlight></codeline>
<codeline lineno="90" refid="namespacehello__world_1_1devices_1_1imu_1a9c07d818a5232e233e78057af4cc4f29" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a9c07d818a5232e233e78057af4cc4f29" kindref="member">kAccRawDataLen</ref><sp/>=<sp/>6u;</highlight></codeline>
<codeline lineno="91" refid="namespacehello__world_1_1devices_1_1imu_1ae4969e35172560587100082bfede3aef" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1ae4969e35172560587100082bfede3aef" kindref="member">kTempRawDataLen</ref><sp/>=<sp/>2u;</highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight></codeline>
<codeline lineno="93" refid="namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a" kindref="member">kSpiTimeout</ref><sp/>=<sp/>5u;<sp/><sp/></highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95" refid="namespacehello__world_1_1devices_1_1imu_1a2892b2630935424b98256bbac46b7c76" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint16_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a2892b2630935424b98256bbac46b7c76" kindref="member">kAccResetTime</ref><sp/>=<sp/>2u;<sp/><sp/></highlight></codeline>
<codeline lineno="96" refid="namespacehello__world_1_1devices_1_1imu_1ae62089d70213a8ed855a551b64eccb53" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1ae62089d70213a8ed855a551b64eccb53" kindref="member">kGyroResetTime</ref><sp/>=<sp/>1u;<sp/><sp/></highlight></codeline>
<codeline lineno="97" refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint16_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref><sp/>=<sp/>2u;<sp/><sp/></highlight></codeline>
<codeline lineno="99" refid="namespacehello__world_1_1devices_1_1imu_1a2197d124ccde446fa944ac4c53ddca63" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint16_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a2197d124ccde446fa944ac4c53ddca63" kindref="member">kCheckWaitTime</ref><sp/>=<sp/>120u;</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="102" refid="namespacehello__world_1_1devices_1_1imu_1a4b69bffbbe7c394213f4ba63f4d4e2b7" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a4b69bffbbe7c394213f4ba63f4d4e2b7" kindref="member">kAccSelfTestShortDelay</ref><sp/>=<sp/>2u;</highlight></codeline>
<codeline lineno="104" refid="namespacehello__world_1_1devices_1_1imu_1a4d1a7ebd52abf9b9b515be763a3e76e2" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a4d1a7ebd52abf9b9b515be763a3e76e2" kindref="member">kAccSelfTestLongDelay</ref><sp/>=<sp/>50u;</highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Private<sp/>types<sp/>-------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Private<sp/>variables<sp/>---------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>External<sp/>variables<sp/>--------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Private<sp/>function<sp/>prototypes<sp/>-----------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(uint16_t<sp/>us);</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="121" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a00b280798b0068e72d0235cd42d9356e" refkind="member"><highlight class="normal"><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a00b280798b0068e72d0235cd42d9356e" kindref="member">BMI088::BMI088</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_h_w_config" kindref="compound">BMI088HWConfig</ref><sp/>&amp;hw_config,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>rot_mat_flatten[9],</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config" kindref="compound">BMI088Config</ref><sp/>&amp;config)</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/>:<sp/>kHspi_(hw_config.hspi),</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>kAccCsPort_(hw_config.acc_cs_port),</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>kAccCsPin_(hw_config.acc_cs_pin),</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>kGyroCsPort_(hw_config.gyro_cs_port),</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>kGyroCsPin_(hw_config.gyro_cs_pin),</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>config_(config)</highlight></codeline>
<codeline lineno="129"><highlight class="normal">{</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>变量检查<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight><highlight class="preprocessor">#pragma<sp/>region</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><ref refid="assert_8hpp_1a5969df827ceb603bed14c4106586484a" kindref="member">HW_ASSERT</ref>(IS_SPI_ALL_INSTANCE(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1" kindref="member">kHspi_</ref>-&gt;Instance),<sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>SPI<sp/>handle&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><ref refid="assert_8hpp_1a5969df827ceb603bed14c4106586484a" kindref="member">HW_ASSERT</ref>(IS_GPIO_ALL_INSTANCE(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ab7d987d8210a4fc77d1f1dfde6c16078" kindref="member">kAccCsPort_</ref>),<sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>GPIO<sp/>port&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><ref refid="assert_8hpp_1a5969df827ceb603bed14c4106586484a" kindref="member">HW_ASSERT</ref>(IS_GPIO_PIN(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a97361975a2ee31bc272c71f9563c6228" kindref="member">kAccCsPin_</ref>),<sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>GPIO<sp/>pin&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><ref refid="assert_8hpp_1a5969df827ceb603bed14c4106586484a" kindref="member">HW_ASSERT</ref>(IS_GPIO_ALL_INSTANCE(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa136b76edb5bbfdc16a8ff91ff3c72eb" kindref="member">kGyroCsPort_</ref>),<sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>GPIO<sp/>port&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><ref refid="assert_8hpp_1a5969df827ceb603bed14c4106586484a" kindref="member">HW_ASSERT</ref>(IS_GPIO_PIN(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a79de225d3923ea4c4ca62a4ef4f9a997" kindref="member">kGyroCsPin_</ref>),<sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>GPIO<sp/>pin&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><ref refid="assert_8hpp_1a5969df827ceb603bed14c4106586484a" kindref="member">HW_ASSERT</ref>(rot_mat_flatten,<sp/></highlight><highlight class="stringliteral">&quot;Empty<sp/>rotation<sp/>matrix&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><ref refid="assert_8hpp_1a5969df827ceb603bed14c4106586484a" kindref="member">HW_ASSERT</ref>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1aab5503ee855c9842317e46e340365a75" kindref="member">acc_range</ref><sp/>&gt;=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a1b5968572f4f140f70490c0056a7ad98a60f26b746398fa69d4839af8785af59d" kindref="member">kBMI088AccRange3G</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1aab5503ee855c9842317e46e340365a75" kindref="member">acc_range</ref><sp/>&lt;=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a1b5968572f4f140f70490c0056a7ad98a5dc50ec716a376d1442bdbf138496785" kindref="member">kBMI088AccRange24G</ref>,</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>Acc<sp/>range:<sp/>%d&quot;</highlight><highlight class="normal">,<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1aab5503ee855c9842317e46e340365a75" kindref="member">acc_range</ref>);</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><ref refid="assert_8hpp_1a5969df827ceb603bed14c4106586484a" kindref="member">HW_ASSERT</ref>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9556cba51bda73a37924cd057682b2b3" kindref="member">acc_odr</ref><sp/>&gt;=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a4150d082933f50162a992c3a351f6497a62071bd8c96ef5f22eb6d8d90f160552" kindref="member">kBMI088AccOdr12_5</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9556cba51bda73a37924cd057682b2b3" kindref="member">acc_odr</ref><sp/>&lt;=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a4150d082933f50162a992c3a351f6497ac55c2b705876e73e883aa1b0a536dff8" kindref="member">kBMI088AccOdr1600</ref>,</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>Acc<sp/>ODR:<sp/>%d&quot;</highlight><highlight class="normal">,<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9556cba51bda73a37924cd057682b2b3" kindref="member">acc_odr</ref>);</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><ref refid="assert_8hpp_1a5969df827ceb603bed14c4106586484a" kindref="member">HW_ASSERT</ref>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9241fa656593bed0c006c95f42cd5d65" kindref="member">acc_osr</ref><sp/>&gt;=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1ac55ed4d468583311a38f1efe25e41020a8e20eec26346459cc412490744d64c87" kindref="member">kBMI088AccOsr4</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9241fa656593bed0c006c95f42cd5d65" kindref="member">acc_osr</ref><sp/>&lt;=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1ac55ed4d468583311a38f1efe25e41020af20f8ca81b3be175c3d94cd3735fb513" kindref="member">kBMI088AccOsrNormal</ref>,</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>Acc<sp/>OSR:<sp/>%d&quot;</highlight><highlight class="normal">,<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9241fa656593bed0c006c95f42cd5d65" kindref="member">acc_osr</ref>);</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><ref refid="assert_8hpp_1a5969df827ceb603bed14c4106586484a" kindref="member">HW_ASSERT</ref>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a971c0dc188f60ebd746e5016abeec630" kindref="member">gyro_range</ref><sp/>&gt;=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a5f381963a5f36b0ad90316482c9fd6e2ac740d3d399a74eca878975759f08ad1c" kindref="member">kBMI088GyroRange2000Dps</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a971c0dc188f60ebd746e5016abeec630" kindref="member">gyro_range</ref><sp/>&lt;=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a5f381963a5f36b0ad90316482c9fd6e2a1ea96fa03944afd1a30fce6c876cb8da" kindref="member">kBMI088GyroRange125Dps</ref>,</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>Gyro<sp/>range:<sp/>%d&quot;</highlight><highlight class="normal">,<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a971c0dc188f60ebd746e5016abeec630" kindref="member">gyro_range</ref>);</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><ref refid="assert_8hpp_1a5969df827ceb603bed14c4106586484a" kindref="member">HW_ASSERT</ref>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a5bc01ce6575fd795b95b4ace89c7d3e2" kindref="member">gyro_odr_fbw</ref><sp/>&gt;=<sp/>BMI088GyroOdrFbw2000_532<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a5bc01ce6575fd795b95b4ace89c7d3e2" kindref="member">gyro_odr_fbw</ref><sp/>&lt;=<sp/>BMI088GyroOdrFbw100_32,</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Error<sp/>Gyro<sp/>ODR<sp/>and<sp/>FBW:<sp/>%d&quot;</highlight><highlight class="normal">,<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a5bc01ce6575fd795b95b4ace89c7d3e2" kindref="member">gyro_odr_fbw</ref>);</highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight><highlight class="preprocessor">#pragma<sp/>endregion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/>memcpy(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac603be31b6c63d3fc61f4221a8491981" kindref="member">rot_mat_flatten_</ref>,<sp/>rot_mat_flatten,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)<sp/>*<sp/>9);</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/>arm_mat_init_f32(&amp;<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a350b375718e7d004bdbf618b63cca8c5" kindref="member">rot_mat_</ref>,<sp/>3,<sp/>3,<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac603be31b6c63d3fc61f4221a8491981" kindref="member">rot_mat_flatten_</ref>);</highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1abe2be687095fa7b54d31a3a69693b306" kindref="member">accCsH</ref>();</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a54cd103bad13c06059088197dabd6acc" kindref="member">gyroCsH</ref>();</highlight></codeline>
<codeline lineno="160"><highlight class="normal">}</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="168" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a623a7d90db0585ea45bac12fd3d19061" refkind="member"><highlight class="normal"><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf" kindref="member">BMI088ErrState</ref><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a623a7d90db0585ea45bac12fd3d19061" kindref="member">BMI088::init</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>self_test)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="169"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf" kindref="member">BMI088ErrState</ref><sp/>err_state<sp/>=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f" kindref="member">kBMI088ErrStateNoErr</ref>;</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/>err_state<sp/>=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf" kindref="member">BMI088ErrState</ref>(err_state<sp/>|<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a88754aa2ebac6fcdfde4c5ce4de33dd6" kindref="member">gyroInit</ref>(self_test));</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/>err_state<sp/>=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf" kindref="member">BMI088ErrState</ref>(err_state<sp/>|<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1af18363d9dd6de94e4961ce1772923483" kindref="member">accInit</ref>(self_test));</highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>err_state;</highlight></codeline>
<codeline lineno="176"><highlight class="normal">}</highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight></codeline>
<codeline lineno="186" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa4b8ef9d615c0ead67e6b88c34bd84d1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa4b8ef9d615c0ead67e6b88c34bd84d1" kindref="member">BMI088::getData</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>acc_data[3],<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>gyro_data[3],<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*temp_ptr)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="187"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>tmp_data[3];</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(acc_data<sp/>!=<sp/></highlight><highlight class="keyword">nullptr</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad236f84f69a0ef4e8befa96479bf5618" kindref="member">getAccData</ref>(tmp_data);</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/>arm_mat_vec_mult_f32(&amp;<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a350b375718e7d004bdbf618b63cca8c5" kindref="member">rot_mat_</ref>,<sp/>tmp_data,<sp/>acc_data);</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(gyro_data<sp/>!=<sp/></highlight><highlight class="keyword">nullptr</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a00755ad04aebc2df220b39f1a83bf811" kindref="member">getGyroData</ref>(tmp_data);</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/>arm_mat_vec_mult_f32(&amp;<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a350b375718e7d004bdbf618b63cca8c5" kindref="member">rot_mat_</ref>,<sp/>tmp_data,<sp/>gyro_data);</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(temp_ptr<sp/>!=<sp/></highlight><highlight class="keyword">nullptr</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/>*temp_ptr<sp/>=<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0672cec3591e037942c7bc03b31dd24a" kindref="member">getTemp</ref>();</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="206"><highlight class="normal">}</highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="214" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1af18363d9dd6de94e4961ce1772923483" refkind="member"><highlight class="normal"><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf" kindref="member">BMI088ErrState</ref><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1af18363d9dd6de94e4961ce1772923483" kindref="member">BMI088::accInit</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>self_test)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="215"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a" kindref="member">accRead</ref>(<ref refid="_b_m_i088__reg_8hpp_1a464aa60f701f4fcb2207e84e938f02a8" kindref="member">BMI088_ACC_ACC_CHIP_ID</ref>);<sp/><sp/></highlight><highlight class="comment">//<sp/>假读取</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a" kindref="member">accRead</ref>(<ref refid="_b_m_i088__reg_8hpp_1a464aa60f701f4fcb2207e84e938f02a8" kindref="member">BMI088_ACC_ACC_CHIP_ID</ref>)<sp/>!=<sp/><ref refid="_b_m_i088__reg_8hpp_1ae97c06f96a3ca343e2708d55802245dc" kindref="member">BMI088_ACC_ACC_CHIP_ID_VALUE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa33f5d7685272e1454b0a839318a1c155" kindref="member">kBMI088ErrStateAccNotFound</ref>;</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(self_test)<sp/>{</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bc81c0ed908d469d3c0bde126a80311" kindref="member">accSelfTest</ref>()<sp/>!=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f" kindref="member">kBMI088ErrStateNoErr</ref>)<sp/>{</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa1fd3e7bba87b31d71a08e2b72646a3fd" kindref="member">kBMI088ErrStateAccSelfTestFailed</ref>;</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>配置一些寄存器</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/>uint8_t<sp/>acc_conf<sp/>=<sp/>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9241fa656593bed0c006c95f42cd5d65" kindref="member">acc_osr</ref><sp/>&lt;&lt;<sp/><ref refid="_b_m_i088__reg_8hpp_1ad03c3c6ec3173b33c2c8be77fa0e2361" kindref="member">_BMI088_ACC_ACC_CONF_ACC_OSR_SHFITS</ref>)<sp/>|</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9556cba51bda73a37924cd057682b2b3" kindref="member">acc_odr</ref><sp/>&lt;&lt;<sp/><ref refid="_b_m_i088__reg_8hpp_1af197c0a05dc07ed26712932ce7cb2f13" kindref="member">_BMI088_ACC_ACC_CONF_ACC_ODR_SHFITS</ref>);</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/>uint8_t<sp/>acc_init_config[4][2]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{<ref refid="_b_m_i088__reg_8hpp_1a94d04d0a52dc93fe34ab0d90146fa1fa" kindref="member">BMI088_ACC_ACC_RANGE</ref>,<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1aab5503ee855c9842317e46e340365a75" kindref="member">acc_range</ref>},</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{<ref refid="_b_m_i088__reg_8hpp_1a6cabbe16234ea294944c1681d349ad37" kindref="member">BMI088_ACC_ACC_CONF</ref>,<sp/>acc_conf},</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{<ref refid="_b_m_i088__reg_8hpp_1a9514af79d27808ca77f49de37741d1a5" kindref="member">BMI088_ACC_ACC_PWR_CTRL</ref>,<sp/><ref refid="_b_m_i088__reg_8hpp_1ac8d38427f08bb2343ce5b25093c5072c" kindref="member">BMI088_ACC_ACC_PWR_CTRL_ON</ref>},</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{<ref refid="_b_m_i088__reg_8hpp_1a97197867ec26383f3558215b851a573d" kindref="member">BMI088_ACC_ACC_PWR_CONF</ref>,<sp/><ref refid="_b_m_i088__reg_8hpp_1a0a896d645a713eb6150404fa64efb4bb" kindref="member">BMI088_ACC_ACC_PWR_CONF_ACTIVE_MODE</ref>}};</highlight></codeline>
<codeline lineno="238"><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59" kindref="member">accWrite</ref>(<ref refid="_b_m_i088__reg_8hpp_1a7a96d84044869e1006f5dde9df656076" kindref="member">BMI088_ACC_ACC_SOFTRESET</ref>,<sp/><ref refid="_b_m_i088__reg_8hpp_1a2403e8b99e3128494b9be2828de1b5f7" kindref="member">BMI088_ACC_ACC_SOFTRESET_VALUE</ref>);</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/>HAL_Delay(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2892b2630935424b98256bbac46b7c76" kindref="member">kAccResetTime</ref>);</highlight></codeline>
<codeline lineno="242"><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a" kindref="member">accRead</ref>(<ref refid="_b_m_i088__reg_8hpp_1a464aa60f701f4fcb2207e84e938f02a8" kindref="member">BMI088_ACC_ACC_CHIP_ID</ref>);<sp/><sp/></highlight><highlight class="comment">//<sp/>假读取</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>4;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59" kindref="member">accWrite</ref>(acc_init_config[i][0],<sp/>acc_init_config[i][1]);</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2197d124ccde446fa944ac4c53ddca63" kindref="member">kCheckWaitTime</ref>);</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a" kindref="member">accRead</ref>(acc_init_config[i][0])<sp/>!=<sp/>acc_init_config[i][1])<sp/>{</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa3275cd83116cc9f6625817cfad14a433" kindref="member">kBMI088ErrStateAccConfigErr</ref>;</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="254"><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f" kindref="member">kBMI088ErrStateNoErr</ref>;</highlight></codeline>
<codeline lineno="256"><highlight class="normal">}</highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight></codeline>
<codeline lineno="264" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a88754aa2ebac6fcdfde4c5ce4de33dd6" refkind="member"><highlight class="normal"><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf" kindref="member">BMI088ErrState</ref><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a88754aa2ebac6fcdfde4c5ce4de33dd6" kindref="member">BMI088::gyroInit</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>self_test)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="265"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a16b8a6609a3b902bc05c4e2857801cd2" kindref="member">gyroRead</ref>(<ref refid="_b_m_i088__reg_8hpp_1a111dfc62522a55fdb1913f6162a3ddfa" kindref="member">BMI088_GYRO_GYRO_CHIP_ID</ref>)<sp/>!=<sp/><ref refid="_b_m_i088__reg_8hpp_1aa3ba99a02a11fd7bdcb3c235c070f588" kindref="member">BMI088_GYRO_GYRO_CHIP_ID_VALUE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafaf36788cb829d6f706bbfc614d824e1bf" kindref="member">kBMI088ErrStateGyroNotFound</ref>;</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="270"><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(self_test)<sp/>{</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac8c0c2e64b56c3feb6888446b4830be3" kindref="member">gyroSelfTest</ref>()<sp/>!=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f" kindref="member">kBMI088ErrStateNoErr</ref>)<sp/>{</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa5ac7ace53ccf983ab0f56f8e09fb4290" kindref="member">kBMI088ErrStateGyroSelfTestFailed</ref>;</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="276"><highlight class="normal"></highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>配置一些寄存器</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/>uint8_t<sp/>gyro_bandwidth<sp/>=<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a5bc01ce6575fd795b95b4ace89c7d3e2" kindref="member">gyro_odr_fbw</ref><sp/>|</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_b_m_i088__reg_8hpp_1ac0b5c42bc668a4f1d4e701d916fceca2" kindref="member">BMI088_GYRO_GYRO_BANDWIDTH_MUST_SET</ref>;</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/>uint8_t<sp/>gyro_init_config[3][2]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{<ref refid="_b_m_i088__reg_8hpp_1adae803e32838eeeba32504566993e5e4" kindref="member">BMI088_GYRO_GYRO_RANGE</ref>,<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a971c0dc188f60ebd746e5016abeec630" kindref="member">gyro_range</ref>},</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{<ref refid="_b_m_i088__reg_8hpp_1a49b1f262ca24421b6f1c6a28131629d5" kindref="member">BMI088_GYRO_GYRO_BANDWIDTH</ref>,<sp/>gyro_bandwidth},</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{<ref refid="_b_m_i088__reg_8hpp_1a555699e12c1fc0a97363fe6881208a68" kindref="member">BMI088_GYRO_GYRO_LPM1</ref>,<sp/><ref refid="_b_m_i088__reg_8hpp_1ada1a723751c84658bd35bb53f6133662" kindref="member">BMI088_GYRO_GYRO_LPM1_NORMAL</ref>}};</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1adf2ebc011e80e2ad115716307c773c6f" kindref="member">gyroWrite</ref>(<ref refid="_b_m_i088__reg_8hpp_1a5eea1e216988cdde51d47d1ef7b302b6" kindref="member">BMI088_GYRO_GYRO_SOFTRESET</ref>,<sp/><ref refid="_b_m_i088__reg_8hpp_1a6e0561366a94c357b65a0d73315aff16" kindref="member">BMI088_GYRO_GYRO_SOFTRESET_VALUE</ref>);</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/>HAL_Delay(<ref refid="namespacehello__world_1_1devices_1_1imu_1ae62089d70213a8ed855a551b64eccb53" kindref="member">kGyroResetTime</ref>);</highlight></codeline>
<codeline lineno="287"><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>3;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1adf2ebc011e80e2ad115716307c773c6f" kindref="member">gyroWrite</ref>(gyro_init_config[i][0],<sp/>gyro_init_config[i][1]);</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2197d124ccde446fa944ac4c53ddca63" kindref="member">kCheckWaitTime</ref>);</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a16b8a6609a3b902bc05c4e2857801cd2" kindref="member">gyroRead</ref>(gyro_init_config[i][0])<sp/>!=<sp/>gyro_init_config[i][1])<sp/>{</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafaa325e1db5049d081cd037fe9d8c642f3" kindref="member">kBMI088ErrStateGyroConfigErr</ref>;</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f" kindref="member">kBMI088ErrStateNoErr</ref>;</highlight></codeline>
<codeline lineno="298"><highlight class="normal">}</highlight></codeline>
<codeline lineno="299"><highlight class="normal"></highlight></codeline>
<codeline lineno="305" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bc81c0ed908d469d3c0bde126a80311" refkind="member"><highlight class="normal"><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf" kindref="member">BMI088ErrState</ref><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bc81c0ed908d469d3c0bde126a80311" kindref="member">BMI088::accSelfTest</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="306"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/>uint8_t<sp/>acc_init_config[4][2]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{<ref refid="_b_m_i088__reg_8hpp_1a94d04d0a52dc93fe34ab0d90146fa1fa" kindref="member">BMI088_ACC_ACC_RANGE</ref>,<sp/><ref refid="_b_m_i088__reg_8hpp_1aca7dfd7218302e42090dea77fa023e28" kindref="member">BMI088_ACC_ACC_RANGE_ACC_RANGE_24G</ref>},</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{<ref refid="_b_m_i088__reg_8hpp_1a6cabbe16234ea294944c1681d349ad37" kindref="member">BMI088_ACC_ACC_CONF</ref>,<sp/><ref refid="_b_m_i088__reg_8hpp_1a9a8e968b02a3089e7d227f16497c3e67" kindref="member">BMI088_ACC_ACC_CONF_NORMAL</ref><sp/>|</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_b_m_i088__reg_8hpp_1a419eade8e4337034ab30c6b1c774323c" kindref="member">BMI088_ACC_ACC_CONF_ACC_ODR_1600_HZ</ref>},</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{<ref refid="_b_m_i088__reg_8hpp_1a9514af79d27808ca77f49de37741d1a5" kindref="member">BMI088_ACC_ACC_PWR_CTRL</ref>,<sp/><ref refid="_b_m_i088__reg_8hpp_1ac8d38427f08bb2343ce5b25093c5072c" kindref="member">BMI088_ACC_ACC_PWR_CTRL_ON</ref>},</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{<ref refid="_b_m_i088__reg_8hpp_1a97197867ec26383f3558215b851a573d" kindref="member">BMI088_ACC_ACC_PWR_CONF</ref>,<sp/><ref refid="_b_m_i088__reg_8hpp_1a0a896d645a713eb6150404fa64efb4bb" kindref="member">BMI088_ACC_ACC_PWR_CONF_ACTIVE_MODE</ref>}};</highlight></codeline>
<codeline lineno="313"><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>4;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59" kindref="member">accWrite</ref>(acc_init_config[i][0],<sp/>acc_init_config[i][1]);</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2197d124ccde446fa944ac4c53ddca63" kindref="member">kCheckWaitTime</ref>);</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a" kindref="member">accRead</ref>(acc_init_config[i][0])<sp/>!=<sp/>acc_init_config[i][1])<sp/>{</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa1fd3e7bba87b31d71a08e2b72646a3fd" kindref="member">kBMI088ErrStateAccSelfTestFailed</ref>;</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="322"><highlight class="normal"></highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/>HAL_Delay(<ref refid="namespacehello__world_1_1devices_1_1imu_1a4b69bffbbe7c394213f4ba63f4d4e2b7" kindref="member">kAccSelfTestShortDelay</ref>);</highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>pos_self_test_data[3],<sp/>neg_self_test_data[3];</highlight></codeline>
<codeline lineno="326"><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59" kindref="member">accWrite</ref>(<ref refid="_b_m_i088__reg_8hpp_1ab5c7deeed8f250205c297a07fc4290f7" kindref="member">BMI088_ACC_ACC_SELF_TEST</ref>,<sp/><ref refid="_b_m_i088__reg_8hpp_1aba28bf598e3474800d22a64fd1e347db" kindref="member">BMI088_ACC_ACC_SELF_TEST_POSITIVE_SIGNAL</ref>);</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/>HAL_Delay(<ref refid="namespacehello__world_1_1devices_1_1imu_1a4d1a7ebd52abf9b9b515be763a3e76e2" kindref="member">kAccSelfTestLongDelay</ref>);</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad236f84f69a0ef4e8befa96479bf5618" kindref="member">getAccData</ref>(pos_self_test_data);</highlight></codeline>
<codeline lineno="330"><highlight class="normal"></highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59" kindref="member">accWrite</ref>(<ref refid="_b_m_i088__reg_8hpp_1ab5c7deeed8f250205c297a07fc4290f7" kindref="member">BMI088_ACC_ACC_SELF_TEST</ref>,<sp/><ref refid="_b_m_i088__reg_8hpp_1a2265bb0e8d006b3b60943df8bfaf96e3" kindref="member">BMI088_ACC_ACC_SELF_TEST_NEGATIVE_SIGNAL</ref>);</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/>HAL_Delay(<ref refid="namespacehello__world_1_1devices_1_1imu_1a4d1a7ebd52abf9b9b515be763a3e76e2" kindref="member">kAccSelfTestLongDelay</ref>);</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad236f84f69a0ef4e8befa96479bf5618" kindref="member">getAccData</ref>(neg_self_test_data);</highlight></codeline>
<codeline lineno="334"><highlight class="normal"></highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>min_diff_thres[3]<sp/>=<sp/>{<ref refid="namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830" kindref="member">kGravAcc</ref>,<sp/><ref refid="namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830" kindref="member">kGravAcc</ref>,<sp/>0.5<sp/>*<sp/><ref refid="namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830" kindref="member">kGravAcc</ref>};</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>3;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pos_self_test_data[i]<sp/>-<sp/>neg_self_test_data[i]<sp/>&lt;<sp/>min_diff_thres[i])<sp/>{</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa1fd3e7bba87b31d71a08e2b72646a3fd" kindref="member">kBMI088ErrStateAccSelfTestFailed</ref>;</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="341"><highlight class="normal"></highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f" kindref="member">kBMI088ErrStateNoErr</ref>;</highlight></codeline>
<codeline lineno="343"><highlight class="normal">}</highlight></codeline>
<codeline lineno="344"><highlight class="normal"></highlight></codeline>
<codeline lineno="350" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac8c0c2e64b56c3feb6888446b4830be3" refkind="member"><highlight class="normal"><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf" kindref="member">BMI088ErrState</ref><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac8c0c2e64b56c3feb6888446b4830be3" kindref="member">BMI088::gyroSelfTest</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="351"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>配置一些寄存器</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1adf2ebc011e80e2ad115716307c773c6f" kindref="member">gyroWrite</ref>(<ref refid="_b_m_i088__reg_8hpp_1a7b45feecb36446f0279f158a238c29ad" kindref="member">BMI088_GYRO_GYRO_SELF_TEST</ref>,<sp/><ref refid="_b_m_i088__reg_8hpp_1a3c76e6933674ba4a69aa92b378e9f3f5" kindref="member">BMI088_GYRO_GYRO_SELF_TEST_TRIG_BIST</ref>);</highlight></codeline>
<codeline lineno="355"><highlight class="normal"></highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/>uint8_t<sp/>test_result;</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(1)<sp/>{</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(<ref refid="namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571" kindref="member">kCommWaitTime</ref>);</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/>test_result<sp/>=<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a16b8a6609a3b902bc05c4e2857801cd2" kindref="member">gyroRead</ref>(<ref refid="_b_m_i088__reg_8hpp_1a7b45feecb36446f0279f158a238c29ad" kindref="member">BMI088_GYRO_GYRO_SELF_TEST</ref>);</highlight></codeline>
<codeline lineno="360"><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(test_result<sp/>&amp;<sp/><ref refid="_b_m_i088__reg_8hpp_1a38ae947f46e410c98768b4284f4c2799" kindref="member">BMI088_GYRO_GYRO_SELF_TEST_BIST_RDY</ref>)<sp/>{</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(test_result<sp/>&amp;<sp/><ref refid="_b_m_i088__reg_8hpp_1a70daf67398f8b8f91a4e437b696c8826" kindref="member">BMI088_GYRO_GYRO_SELF_TEST_BIST_FAIL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa5ac7ace53ccf983ab0f56f8e09fb4290" kindref="member">kBMI088ErrStateGyroSelfTestFailed</ref>;</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f" kindref="member">kBMI088ErrStateNoErr</ref>;</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="369"><highlight class="normal">}</highlight></codeline>
<codeline lineno="370"><highlight class="normal"></highlight></codeline>
<codeline lineno="377" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a00755ad04aebc2df220b39f1a83bf811" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a00755ad04aebc2df220b39f1a83bf811" kindref="member">BMI088::getGyroData</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>gyro_data[3])</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="378"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/>uint8_t<sp/>gyro_raw_data[<ref refid="namespacehello__world_1_1devices_1_1imu_1a3e4baaf9203b036df28de0609668d42f" kindref="member">kGyroRawDataLen</ref>];</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a443cf9b8f3e44acea8ac21258b4d7363" kindref="member">gyroMultiRead</ref>(<ref refid="_b_m_i088__reg_8hpp_1a59395733e43e82b15084d632dce434b0" kindref="member">BMI088_GYRO_RATE_X_LSB</ref>,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a3e4baaf9203b036df28de0609668d42f" kindref="member">kGyroRawDataLen</ref>,<sp/>gyro_raw_data);</highlight></codeline>
<codeline lineno="381"><highlight class="normal"></highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>3;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/>gyro_data[i]<sp/>=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a0ed80ae63f77153e0821addb336446e2" kindref="member">kGyroSens</ref>[<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a971c0dc188f60ebd746e5016abeec630" kindref="member">gyro_range</ref>]<sp/>*</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal">int16_t</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro_raw_data[2<sp/>*<sp/>i]<sp/>|<sp/>gyro_raw_data[2<sp/>*<sp/>i<sp/>+<sp/>1]<sp/>&lt;&lt;<sp/>8);</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="387"><highlight class="normal">}</highlight></codeline>
<codeline lineno="388"><highlight class="normal"></highlight></codeline>
<codeline lineno="395" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad236f84f69a0ef4e8befa96479bf5618" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad236f84f69a0ef4e8befa96479bf5618" kindref="member">BMI088::getAccData</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>acc_data[3])</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="396"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/>uint8_t<sp/>acc_raw_data[<ref refid="namespacehello__world_1_1devices_1_1imu_1a9c07d818a5232e233e78057af4cc4f29" kindref="member">kAccRawDataLen</ref>];</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad8bdc7c9eee4bb3c35ee8467df9e49ae" kindref="member">accMultiRead</ref>(<ref refid="_b_m_i088__reg_8hpp_1a3de924f591b6e8b05d2b2ee2e12f1da5" kindref="member">BMI088_ACC_ACC_X_LSB</ref>,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a9c07d818a5232e233e78057af4cc4f29" kindref="member">kAccRawDataLen</ref>,<sp/>acc_raw_data);</highlight></codeline>
<codeline lineno="399"><highlight class="normal"></highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>3;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/>acc_data[i]<sp/>=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a5a86856961df34d30843390644886532" kindref="member">kAccSens</ref>[<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a" kindref="member">config_</ref>.<ref refid="structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1aab5503ee855c9842317e46e340365a75" kindref="member">acc_range</ref>]<sp/>*</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal">int16_t</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>acc_raw_data[2<sp/>*<sp/>i]<sp/>|<sp/>acc_raw_data[2<sp/>*<sp/>i<sp/>+<sp/>1]<sp/>&lt;&lt;<sp/>8);</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="405"><highlight class="normal">}</highlight></codeline>
<codeline lineno="406"><highlight class="normal"></highlight></codeline>
<codeline lineno="412" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0672cec3591e037942c7bc03b31dd24a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0672cec3591e037942c7bc03b31dd24a" kindref="member">BMI088::getTemp</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="413"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/>uint8_t<sp/>temp_raw_data[<ref refid="namespacehello__world_1_1devices_1_1imu_1ae4969e35172560587100082bfede3aef" kindref="member">kTempRawDataLen</ref>];</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad8bdc7c9eee4bb3c35ee8467df9e49ae" kindref="member">accMultiRead</ref>(<ref refid="_b_m_i088__reg_8hpp_1a40bf07cf7605757e9ff4e2b73c5e118a" kindref="member">BMI088_ACC_TEMP_MSB</ref>,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1ae4969e35172560587100082bfede3aef" kindref="member">kTempRawDataLen</ref>,<sp/>temp_raw_data);</highlight></codeline>
<codeline lineno="416"><highlight class="normal"></highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/>int16_t<sp/>temp_raw<sp/>=</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal">uint16_t</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">((temp_raw_data[0]<sp/>&lt;&lt;<sp/><ref refid="_b_m_i088__reg_8hpp_1a1601f0939849a170124bf8ab523b0d9b" kindref="member">_BMI088_ACC_TEMP_MSB_SHIFTS</ref>)<sp/>|</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(temp_raw_data[1]<sp/>&gt;&gt;<sp/><ref refid="_b_m_i088__reg_8hpp_1a7f4d5277e5d124b71a7fb47eb9c3773b" kindref="member">_BMI088_ACC_TEMP_LSB_SHIFTS</ref>));</highlight></codeline>
<codeline lineno="420"><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(temp_raw<sp/>&gt;<sp/>1023)<sp/>{</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/>temp_raw<sp/>-=<sp/>2048;</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="424"><highlight class="normal"></highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>temp_raw<sp/>*<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a27ec247e96dea1a69a25048e94e108ee" kindref="member">kTempSens</ref><sp/>+<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a3ca6e2287a6e1578dcae2f9837721962" kindref="member">kTempOffset</ref>;</highlight></codeline>
<codeline lineno="426"><highlight class="normal">}</highlight></codeline>
<codeline lineno="427"><highlight class="normal"></highlight></codeline>
<codeline lineno="435" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1adf2ebc011e80e2ad115716307c773c6f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1adf2ebc011e80e2ad115716307c773c6f" kindref="member">BMI088::gyroWrite</ref>(uint8_t<sp/>mem_addr,<sp/>uint8_t<sp/>value)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="436"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/>uint8_t<sp/>tx_data[2]<sp/>=<sp/>{mem_addr<sp/>|=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1af60d7777256f8e7b1383437df9d7c420" kindref="member">kWriteSign</ref>,<sp/>value};</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac7e428dbf85a72f9b9689a78e7e73f02" kindref="member">gyroCsL</ref>();</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/>HAL_SPI_Transmit(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1" kindref="member">kHspi_</ref>,<sp/>tx_data,<sp/>2,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a" kindref="member">kSpiTimeout</ref>);</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a54cd103bad13c06059088197dabd6acc" kindref="member">gyroCsH</ref>();</highlight></codeline>
<codeline lineno="441"><highlight class="normal">}</highlight></codeline>
<codeline lineno="442"><highlight class="normal"></highlight></codeline>
<codeline lineno="449" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a16b8a6609a3b902bc05c4e2857801cd2" refkind="member"><highlight class="normal">uint8_t<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a16b8a6609a3b902bc05c4e2857801cd2" kindref="member">BMI088::gyroRead</ref>(uint8_t<sp/>mem_addr)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="450"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/>uint8_t<sp/>rx_data[2],<sp/>tx_data[2]<sp/>=<sp/>{mem_addr<sp/>|=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1aa8d641907aa367b051e7f14cdea8673c" kindref="member">kReadSign</ref>,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref>};</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac7e428dbf85a72f9b9689a78e7e73f02" kindref="member">gyroCsL</ref>();</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/>HAL_SPI_TransmitReceive(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1" kindref="member">kHspi_</ref>,<sp/>tx_data,<sp/>rx_data,<sp/>2,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a" kindref="member">kSpiTimeout</ref>);</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a54cd103bad13c06059088197dabd6acc" kindref="member">gyroCsH</ref>();</highlight></codeline>
<codeline lineno="455"><highlight class="normal"></highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rx_data[1];</highlight></codeline>
<codeline lineno="457"><highlight class="normal">}</highlight></codeline>
<codeline lineno="458"><highlight class="normal"></highlight></codeline>
<codeline lineno="467" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a443cf9b8f3e44acea8ac21258b4d7363" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a443cf9b8f3e44acea8ac21258b4d7363" kindref="member">BMI088::gyroMultiRead</ref>(</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>start_mem_addr,<sp/>uint8_t<sp/>len,<sp/>uint8_t<sp/>rx_data[])</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="469"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac7e428dbf85a72f9b9689a78e7e73f02" kindref="member">gyroCsL</ref>();</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/>start_mem_addr<sp/>|=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1aa8d641907aa367b051e7f14cdea8673c" kindref="member">kReadSign</ref>;</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/>HAL_SPI_Transmit(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1" kindref="member">kHspi_</ref>,<sp/>&amp;start_mem_addr,<sp/>1,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a" kindref="member">kSpiTimeout</ref>);</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/>HAL_SPI_TransmitReceive(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1" kindref="member">kHspi_</ref>,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1af1a33535f593f71f8f97bfe690bba84f" kindref="member">kPaddingData</ref>,<sp/>rx_data,<sp/>len,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a" kindref="member">kSpiTimeout</ref>);</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a54cd103bad13c06059088197dabd6acc" kindref="member">gyroCsH</ref>();</highlight></codeline>
<codeline lineno="475"><highlight class="normal">}</highlight></codeline>
<codeline lineno="476"><highlight class="normal"></highlight></codeline>
<codeline lineno="484" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59" kindref="member">BMI088::accWrite</ref>(uint8_t<sp/>mem_addr,<sp/>uint8_t<sp/>value)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="485"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/>uint8_t<sp/>pTxData[2]<sp/>=<sp/>{mem_addr<sp/>|=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1af60d7777256f8e7b1383437df9d7c420" kindref="member">kWriteSign</ref>,<sp/>value};</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad1ea4fa147f8bb2da18049c229404f65" kindref="member">accCsL</ref>();</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/>HAL_SPI_Transmit(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1" kindref="member">kHspi_</ref>,<sp/>pTxData,<sp/>2,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a" kindref="member">kSpiTimeout</ref>);</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1abe2be687095fa7b54d31a3a69693b306" kindref="member">accCsH</ref>();</highlight></codeline>
<codeline lineno="490"><highlight class="normal">}</highlight></codeline>
<codeline lineno="491"><highlight class="normal"></highlight></codeline>
<codeline lineno="498" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a" refkind="member"><highlight class="normal">uint8_t<sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a" kindref="member">BMI088::accRead</ref>(uint8_t<sp/>mem_addr)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="499"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/>uint8_t<sp/>rx_data[3],<sp/>tx_data[3]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mem_addr<sp/>|=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1aa8d641907aa367b051e7f14cdea8673c" kindref="member">kReadSign</ref>,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref>,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref>};</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad1ea4fa147f8bb2da18049c229404f65" kindref="member">accCsL</ref>();</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/>HAL_SPI_TransmitReceive(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1" kindref="member">kHspi_</ref>,<sp/>tx_data,<sp/>rx_data,<sp/>3,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a" kindref="member">kSpiTimeout</ref>);</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1abe2be687095fa7b54d31a3a69693b306" kindref="member">accCsH</ref>();</highlight></codeline>
<codeline lineno="505"><highlight class="normal"></highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rx_data[2];</highlight></codeline>
<codeline lineno="507"><highlight class="normal">}</highlight></codeline>
<codeline lineno="508"><highlight class="normal"></highlight></codeline>
<codeline lineno="517" refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad8bdc7c9eee4bb3c35ee8467df9e49ae" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad8bdc7c9eee4bb3c35ee8467df9e49ae" kindref="member">BMI088::accMultiRead</ref>(</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>start_mem_addr,<sp/>uint8_t<sp/>len,<sp/>uint8_t<sp/>rx_data[])</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="519"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/>uint8_t<sp/>tx_data[2]<sp/>=<sp/>{start_mem_addr<sp/>|=<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1aa8d641907aa367b051e7f14cdea8673c" kindref="member">kReadSign</ref>,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29" kindref="member">kPaddingValue</ref>};</highlight></codeline>
<codeline lineno="521"><highlight class="normal"></highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad1ea4fa147f8bb2da18049c229404f65" kindref="member">accCsL</ref>();</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/>HAL_SPI_TransmitReceive(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1" kindref="member">kHspi_</ref>,<sp/>tx_data,<sp/>rx_data,<sp/>2,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a" kindref="member">kSpiTimeout</ref>);</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/>HAL_SPI_TransmitReceive(<ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1" kindref="member">kHspi_</ref>,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1af1a33535f593f71f8f97bfe690bba84f" kindref="member">kPaddingData</ref>,<sp/>rx_data,<sp/>len,<sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a" kindref="member">kSpiTimeout</ref>);</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><ref refid="classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1abe2be687095fa7b54d31a3a69693b306" kindref="member">accCsH</ref>();</highlight></codeline>
<codeline lineno="526"><highlight class="normal">}</highlight></codeline>
<codeline lineno="527"><highlight class="normal"></highlight></codeline>
<codeline lineno="534" refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769" kindref="member">DelayUs</ref>(uint16_t<sp/>us)</highlight></codeline>
<codeline lineno="535"><highlight class="normal">{</highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/>uint32_t<sp/>reload<sp/>=<sp/>SysTick-&gt;LOAD;</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/>uint32_t<sp/>ticks<sp/>=<sp/>us<sp/>*<sp/>(SystemCoreClock<sp/>/<sp/>1e6f);</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/>uint32_t<sp/>t_last<sp/>=<sp/>SysTick-&gt;VAL;</highlight></codeline>
<codeline lineno="539"><highlight class="normal"></highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/>uint32_t<sp/>t_now<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/>uint32_t<sp/>t_cnt<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="542"><highlight class="normal"></highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(t_cnt<sp/>&lt;<sp/>ticks)<sp/>{</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/>t_now<sp/>=<sp/>SysTick-&gt;VAL;</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t_now<sp/>!=<sp/>t_last)<sp/>{</highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t_now<sp/>&lt;<sp/>t_last)<sp/>{</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t_cnt<sp/>+=<sp/>t_last<sp/>-<sp/>t_now;</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t_cnt<sp/>+=<sp/>reload<sp/>-<sp/>t_now<sp/>+<sp/>t_last;</highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t_last<sp/>=<sp/>t_now;</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="554"><highlight class="normal">}</highlight></codeline>
<codeline lineno="555"><highlight class="normal">}<sp/><sp/></highlight><highlight class="comment">//<sp/>namespace<sp/>imu</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="556"><highlight class="normal">}<sp/><sp/></highlight><highlight class="comment">//<sp/>namespace<sp/>devices</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="557"><highlight class="normal">}<sp/><sp/></highlight><highlight class="comment">//<sp/>namespace<sp/>hello_world</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="HW-Components/devices/imu/src/BMI088.cpp"/>
  </compounddef>
</doxygen>
