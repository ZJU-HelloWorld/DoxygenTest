\doxysection{BMI088.\+cpp}
\hypertarget{_b_m_i088_8cpp_source}{}\label{_b_m_i088_8cpp_source}\index{HW-\/Components/devices/imu/src/BMI088.cpp@{HW-\/Components/devices/imu/src/BMI088.cpp}}
\mbox{\hyperlink{_b_m_i088_8cpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00015}00015\ \textcolor{comment}{/*\ Includes\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00016}00016\ \textcolor{comment}{/*\ Private\ macro\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00017}00017\ \textcolor{comment}{/*\ Private\ constants\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00018}00018\ \textcolor{comment}{/*\ Private\ types\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00019}00019\ \textcolor{comment}{/*\ Private\ variables\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00020}00020\ \textcolor{comment}{/*\ External\ variables\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00021}00021\ \textcolor{comment}{/*\ Private\ function\ prototypes\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00037}00037\ \textcolor{comment}{/*\ Includes\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00038}00038\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_b_m_i088_8hpp}{BMI088.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00040}00040\ \textcolor{preprocessor}{\#include\ <cstring>}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00042}00042\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_b_m_i088__reg_8hpp}{BMI088\_reg.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00043}00043\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{assert_8hpp}{assert.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00044}00044\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{base_8hpp}{base.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00046}00046\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacehello__world}{hello\_world}}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00047}00047\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00048}00048\ \textcolor{keyword}{namespace\ }devices}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00049}00049\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00050}00050\ \textcolor{keyword}{namespace\ }imu}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00051}00051\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00052}00052\ \textcolor{comment}{/*\ Private\ macro\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00053}00053\ \textcolor{comment}{/*\ Private\ constants\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00055}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a19136def24f9f6529f7df46c0625acca}{00055}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a19136def24f9f6529f7df46c0625acca}{kMaxMultiTransLen}}\ =\ 8u;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00056}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{00056}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}}\ =\ 0x55;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00057}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_af1a33535f593f71f8f97bfe690bba84f}{00057}}\ \textcolor{keyword}{static}\ uint8\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_af1a33535f593f71f8f97bfe690bba84f}{kPaddingData}}[\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a19136def24f9f6529f7df46c0625acca}{kMaxMultiTransLen}}]\ =\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00058}00058\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00059}00059\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00060}00060\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00061}00061\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00062}00062\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00063}00063\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00064}00064\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00065}00065\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00066}00066\ \};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00068}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a5a86856961df34d30843390644886532}{00068}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a5a86856961df34d30843390644886532}{kAccSens}}[4]\ =\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00069}00069\ \ \ \ \ 3\ *\ \mbox{\hyperlink{namespacehello__world_a8582e15cc16c32ad80a0d6873cf3f830}{kGravAcc}}\ /\ 32768,}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00070}00070\ \ \ \ \ 6\ *\ \mbox{\hyperlink{namespacehello__world_a8582e15cc16c32ad80a0d6873cf3f830}{kGravAcc}}\ /\ 32768,}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00071}00071\ \ \ \ \ 12\ *\ \mbox{\hyperlink{namespacehello__world_a8582e15cc16c32ad80a0d6873cf3f830}{kGravAcc}}\ /\ 32768,}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00072}00072\ \ \ \ \ 24\ *\ \mbox{\hyperlink{namespacehello__world_a8582e15cc16c32ad80a0d6873cf3f830}{kGravAcc}}\ /\ 32768,}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00073}00073\ \};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00075}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a0ed80ae63f77153e0821addb336446e2}{00075}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a0ed80ae63f77153e0821addb336446e2}{kGyroSens}}[5]\ =\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00076}00076\ \ \ \ \ 2000\ *\ \mbox{\hyperlink{namespacehello__world_aff7ca8b5f1a544cfb645d20c17b2ebcf}{kDeg2RadCoff}}\ /\ 32768,}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00077}00077\ \ \ \ \ 1000\ *\ \mbox{\hyperlink{namespacehello__world_aff7ca8b5f1a544cfb645d20c17b2ebcf}{kDeg2RadCoff}}\ /\ 32768,}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00078}00078\ \ \ \ \ 500\ *\ \mbox{\hyperlink{namespacehello__world_aff7ca8b5f1a544cfb645d20c17b2ebcf}{kDeg2RadCoff}}\ /\ 32768,}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00079}00079\ \ \ \ \ 250\ *\ \mbox{\hyperlink{namespacehello__world_aff7ca8b5f1a544cfb645d20c17b2ebcf}{kDeg2RadCoff}}\ /\ 32768,}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00080}00080\ \ \ \ \ 125\ *\ \mbox{\hyperlink{namespacehello__world_aff7ca8b5f1a544cfb645d20c17b2ebcf}{kDeg2RadCoff}}\ /\ 32768,}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00081}00081\ \};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00082}00082\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00083}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a27ec247e96dea1a69a25048e94e108ee}{00083}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a27ec247e96dea1a69a25048e94e108ee}{kTempSens}}\ =\ 0.125f;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00084}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a3ca6e2287a6e1578dcae2f9837721962}{00084}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a3ca6e2287a6e1578dcae2f9837721962}{kTempOffset}}\ =\ 23.0f;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00085}00085\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00086}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_af60d7777256f8e7b1383437df9d7c420}{00086}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_af60d7777256f8e7b1383437df9d7c420}{kWriteSign}}\ =\ 0x00;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00087}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_aa8d641907aa367b051e7f14cdea8673c}{00087}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_aa8d641907aa367b051e7f14cdea8673c}{kReadSign}}\ =\ 0x80;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00088}00088\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00089}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a3e4baaf9203b036df28de0609668d42f}{00089}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a3e4baaf9203b036df28de0609668d42f}{kGyroRawDataLen}}\ =\ 6u;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00090}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a9c07d818a5232e233e78057af4cc4f29}{00090}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a9c07d818a5232e233e78057af4cc4f29}{kAccRawDataLen}}\ =\ 6u;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00091}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_ae4969e35172560587100082bfede3aef}{00091}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_ae4969e35172560587100082bfede3aef}{kTempRawDataLen}}\ =\ 2u;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00093}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afd57b9ff2061310de106415ffdb4888a}{00093}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afd57b9ff2061310de106415ffdb4888a}{kSpiTimeout}}\ =\ 5u;\ \ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00094}00094\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00095}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2892b2630935424b98256bbac46b7c76}{00095}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint16\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2892b2630935424b98256bbac46b7c76}{kAccResetTime}}\ =\ 2u;\ \ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00096}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_ae62089d70213a8ed855a551b64eccb53}{00096}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_ae62089d70213a8ed855a551b64eccb53}{kGyroResetTime}}\ =\ 1u;\ \ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00097}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{00097}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint16\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}}\ =\ 2u;\ \ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00099}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2197d124ccde446fa944ac4c53ddca63}{00099}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint16\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2197d124ccde446fa944ac4c53ddca63}{kCheckWaitTime}}\ =\ 120u;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00100}00100\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00102}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a4b69bffbbe7c394213f4ba63f4d4e2b7}{00102}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a4b69bffbbe7c394213f4ba63f4d4e2b7}{kAccSelfTestShortDelay}}\ =\ 2u;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00104}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a4d1a7ebd52abf9b9b515be763a3e76e2}{00104}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint8\_t\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a4d1a7ebd52abf9b9b515be763a3e76e2}{kAccSelfTestLongDelay}}\ =\ 50u;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00105}00105\ \textcolor{comment}{/*\ Private\ types\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00106}00106\ \textcolor{comment}{/*\ Private\ variables\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00107}00107\ \textcolor{comment}{/*\ External\ variables\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00108}00108\ \textcolor{comment}{/*\ Private\ function\ prototypes\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00109}00109\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00110}00110\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(uint16\_t\ us);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00111}00111\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00121}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a00b280798b0068e72d0235cd42d9356e}{00121}}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a00b280798b0068e72d0235cd42d9356e}{BMI088::BMI088}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_h_w_config}{BMI088HWConfig}}\ \&hw\_config,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ rot\_mat\_flatten[9],}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00122}00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config}{BMI088Config}}\ \&config)}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00123}00123\ \ \ \ \ :\ kHspi\_(hw\_config.hspi),}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00124}00124\ \ \ \ \ \ \ kAccCsPort\_(hw\_config.acc\_cs\_port),}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00125}00125\ \ \ \ \ \ \ kAccCsPin\_(hw\_config.acc\_cs\_pin),}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00126}00126\ \ \ \ \ \ \ kGyroCsPort\_(hw\_config.gyro\_cs\_port),}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00127}00127\ \ \ \ \ \ \ kGyroCsPin\_(hw\_config.gyro\_cs\_pin),}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00128}00128\ \ \ \ \ \ \ config\_(config)}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00129}00129\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00130}00130\ \ \ \textcolor{comment}{/*\ 变量检查\ */}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00131}00131\ \textcolor{preprocessor}{\#pragma\ region}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00132}00132\ \ \ \mbox{\hyperlink{assert_8hpp_a5969df827ceb603bed14c4106586484a}{HW\_ASSERT}}(IS\_SPI\_ALL\_INSTANCE(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a0ee5a0515702e260c800cf20c3a64fe1}{kHspi\_}}-\/>Instance),\ \textcolor{stringliteral}{"{}Error\ SPI\ handle"{}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00133}00133\ \ \ \mbox{\hyperlink{assert_8hpp_a5969df827ceb603bed14c4106586484a}{HW\_ASSERT}}(IS\_GPIO\_ALL\_INSTANCE(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ab7d987d8210a4fc77d1f1dfde6c16078}{kAccCsPort\_}}),\ \textcolor{stringliteral}{"{}Error\ GPIO\ port"{}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00134}00134\ \ \ \mbox{\hyperlink{assert_8hpp_a5969df827ceb603bed14c4106586484a}{HW\_ASSERT}}(IS\_GPIO\_PIN(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a97361975a2ee31bc272c71f9563c6228}{kAccCsPin\_}}),\ \textcolor{stringliteral}{"{}Error\ GPIO\ pin"{}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00135}00135\ \ \ \mbox{\hyperlink{assert_8hpp_a5969df827ceb603bed14c4106586484a}{HW\_ASSERT}}(IS\_GPIO\_ALL\_INSTANCE(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa136b76edb5bbfdc16a8ff91ff3c72eb}{kGyroCsPort\_}}),\ \textcolor{stringliteral}{"{}Error\ GPIO\ port"{}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00136}00136\ \ \ \mbox{\hyperlink{assert_8hpp_a5969df827ceb603bed14c4106586484a}{HW\_ASSERT}}(IS\_GPIO\_PIN(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a79de225d3923ea4c4ca62a4ef4f9a997}{kGyroCsPin\_}}),\ \textcolor{stringliteral}{"{}Error\ GPIO\ pin"{}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00137}00137\ \ \ \mbox{\hyperlink{assert_8hpp_a5969df827ceb603bed14c4106586484a}{HW\_ASSERT}}(rot\_mat\_flatten,\ \textcolor{stringliteral}{"{}Empty\ rotation\ matrix"{}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00138}00138\ \ \ \mbox{\hyperlink{assert_8hpp_a5969df827ceb603bed14c4106586484a}{HW\_ASSERT}}(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_aab5503ee855c9842317e46e340365a75}{acc\_range}}\ >=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a1b5968572f4f140f70490c0056a7ad98a60f26b746398fa69d4839af8785af59d}{kBMI088AccRange3G}}\ \&\&}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00139}00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_aab5503ee855c9842317e46e340365a75}{acc\_range}}\ <=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a1b5968572f4f140f70490c0056a7ad98a5dc50ec716a376d1442bdbf138496785}{kBMI088AccRange24G}},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Error\ Acc\ range:\ \%d"{}},\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_aab5503ee855c9842317e46e340365a75}{acc\_range}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00141}00141\ \ \ \mbox{\hyperlink{assert_8hpp_a5969df827ceb603bed14c4106586484a}{HW\_ASSERT}}(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a9556cba51bda73a37924cd057682b2b3}{acc\_odr}}\ >=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a4150d082933f50162a992c3a351f6497a62071bd8c96ef5f22eb6d8d90f160552}{kBMI088AccOdr12\_5}}\ \&\&}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00142}00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a9556cba51bda73a37924cd057682b2b3}{acc\_odr}}\ <=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a4150d082933f50162a992c3a351f6497ac55c2b705876e73e883aa1b0a536dff8}{kBMI088AccOdr1600}},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Error\ Acc\ ODR:\ \%d"{}},\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a9556cba51bda73a37924cd057682b2b3}{acc\_odr}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00144}00144\ \ \ \mbox{\hyperlink{assert_8hpp_a5969df827ceb603bed14c4106586484a}{HW\_ASSERT}}(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a9241fa656593bed0c006c95f42cd5d65}{acc\_osr}}\ >=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_ac55ed4d468583311a38f1efe25e41020a8e20eec26346459cc412490744d64c87}{kBMI088AccOsr4}}\ \&\&}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00145}00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a9241fa656593bed0c006c95f42cd5d65}{acc\_osr}}\ <=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_ac55ed4d468583311a38f1efe25e41020af20f8ca81b3be175c3d94cd3735fb513}{kBMI088AccOsrNormal}},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00146}00146\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Error\ Acc\ OSR:\ \%d"{}},\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a9241fa656593bed0c006c95f42cd5d65}{acc\_osr}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00147}00147\ \ \ \mbox{\hyperlink{assert_8hpp_a5969df827ceb603bed14c4106586484a}{HW\_ASSERT}}(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a971c0dc188f60ebd746e5016abeec630}{gyro\_range}}\ >=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a5f381963a5f36b0ad90316482c9fd6e2ac740d3d399a74eca878975759f08ad1c}{kBMI088GyroRange2000Dps}}\ \&\&}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00148}00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a971c0dc188f60ebd746e5016abeec630}{gyro\_range}}\ <=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a5f381963a5f36b0ad90316482c9fd6e2a1ea96fa03944afd1a30fce6c876cb8da}{kBMI088GyroRange125Dps}},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00149}00149\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Error\ Gyro\ range:\ \%d"{}},\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a971c0dc188f60ebd746e5016abeec630}{gyro\_range}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00150}00150\ \ \ \mbox{\hyperlink{assert_8hpp_a5969df827ceb603bed14c4106586484a}{HW\_ASSERT}}(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a5bc01ce6575fd795b95b4ace89c7d3e2}{gyro\_odr\_fbw}}\ >=\ BMI088GyroOdrFbw2000\_532\ \&\&}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00151}00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a5bc01ce6575fd795b95b4ace89c7d3e2}{gyro\_odr\_fbw}}\ <=\ BMI088GyroOdrFbw100\_32,}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Error\ Gyro\ ODR\ and\ FBW:\ \%d"{}},\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a5bc01ce6575fd795b95b4ace89c7d3e2}{gyro\_odr\_fbw}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00153}00153\ \textcolor{preprocessor}{\#pragma\ endregion}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00154}00154\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00155}00155\ \ \ memcpy(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ac603be31b6c63d3fc61f4221a8491981}{rot\_mat\_flatten\_}},\ rot\_mat\_flatten,\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float})\ *\ 9);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00156}00156\ \ \ arm\_mat\_init\_f32(\&\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a350b375718e7d004bdbf618b63cca8c5}{rot\_mat\_}},\ 3,\ 3,\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ac603be31b6c63d3fc61f4221a8491981}{rot\_mat\_flatten\_}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00157}00157\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00158}00158\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_abe2be687095fa7b54d31a3a69693b306}{accCsH}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00159}00159\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a54cd103bad13c06059088197dabd6acc}{gyroCsH}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00160}00160\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00161}00161\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00168}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a623a7d90db0585ea45bac12fd3d19061}{00168}}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6faf}{BMI088ErrState}}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a623a7d90db0585ea45bac12fd3d19061}{BMI088::init}}(\textcolor{keywordtype}{bool}\ self\_test)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00169}00169\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00170}00170\ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6faf}{BMI088ErrState}}\ err\_state\ =\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f}{kBMI088ErrStateNoErr}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00171}00171\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00172}00172\ \ \ err\_state\ =\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6faf}{BMI088ErrState}}(err\_state\ |\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a88754aa2ebac6fcdfde4c5ce4de33dd6}{gyroInit}}(self\_test));}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00173}00173\ \ \ err\_state\ =\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6faf}{BMI088ErrState}}(err\_state\ |\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_af18363d9dd6de94e4961ce1772923483}{accInit}}(self\_test));}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00174}00174\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00175}00175\ \ \ \textcolor{keywordflow}{return}\ err\_state;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00176}00176\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00177}00177\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00186}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa4b8ef9d615c0ead67e6b88c34bd84d1}{00186}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa4b8ef9d615c0ead67e6b88c34bd84d1}{BMI088::getData}}(\textcolor{keywordtype}{float}\ acc\_data[3],\ \textcolor{keywordtype}{float}\ gyro\_data[3],\ \textcolor{keywordtype}{float}\ *temp\_ptr)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00187}00187\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00188}00188\ \ \ \textcolor{keywordtype}{float}\ tmp\_data[3];}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00189}00189\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00190}00190\ \ \ \textcolor{keywordflow}{if}\ (acc\_data\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00191}00191\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00192}00192\ \ \ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ad236f84f69a0ef4e8befa96479bf5618}{getAccData}}(tmp\_data);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00193}00193\ \ \ \ \ arm\_mat\_vec\_mult\_f32(\&\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a350b375718e7d004bdbf618b63cca8c5}{rot\_mat\_}},\ tmp\_data,\ acc\_data);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00194}00194\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00195}00195\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00196}00196\ \ \ \textcolor{keywordflow}{if}\ (gyro\_data\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00197}00197\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00198}00198\ \ \ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a00755ad04aebc2df220b39f1a83bf811}{getGyroData}}(tmp\_data);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00199}00199\ \ \ \ \ arm\_mat\_vec\_mult\_f32(\&\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a350b375718e7d004bdbf618b63cca8c5}{rot\_mat\_}},\ tmp\_data,\ gyro\_data);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00200}00200\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00201}00201\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00202}00202\ \ \ \textcolor{keywordflow}{if}\ (temp\_ptr\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00203}00203\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00204}00204\ \ \ \ \ *temp\_ptr\ =\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a0672cec3591e037942c7bc03b31dd24a}{getTemp}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00205}00205\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00206}00206\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00207}00207\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00214}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_af18363d9dd6de94e4961ce1772923483}{00214}}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6faf}{BMI088ErrState}}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_af18363d9dd6de94e4961ce1772923483}{BMI088::accInit}}(\textcolor{keywordtype}{bool}\ self\_test)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00215}00215\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00216}00216\ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00217}00217\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a3d46ca9f969584dbbc7060a0665edd0a}{accRead}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_a464aa60f701f4fcb2207e84e938f02a8}{BMI088\_ACC\_ACC\_CHIP\_ID}});\ \ \textcolor{comment}{//\ 假读取}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00218}00218\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00219}00219\ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00220}00220\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a3d46ca9f969584dbbc7060a0665edd0a}{accRead}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_a464aa60f701f4fcb2207e84e938f02a8}{BMI088\_ACC\_ACC\_CHIP\_ID}})\ !=\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_ae97c06f96a3ca343e2708d55802245dc}{BMI088\_ACC\_ACC\_CHIP\_ID\_VALUE}})\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00221}00221\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa33f5d7685272e1454b0a839318a1c155}{kBMI088ErrStateAccNotFound}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00222}00222\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00223}00223\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00224}00224\ \ \ \textcolor{keywordflow}{if}\ (self\_test)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00225}00225\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a7bc81c0ed908d469d3c0bde126a80311}{accSelfTest}}()\ !=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f}{kBMI088ErrStateNoErr}})\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00226}00226\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa1fd3e7bba87b31d71a08e2b72646a3fd}{kBMI088ErrStateAccSelfTestFailed}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00227}00227\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00228}00228\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00229}00229\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00230}00230\ \ \ \textcolor{comment}{//\ 配置一些寄存器}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00231}00231\ \ \ uint8\_t\ acc\_conf\ =\ (\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a9241fa656593bed0c006c95f42cd5d65}{acc\_osr}}\ <<\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_ad03c3c6ec3173b33c2c8be77fa0e2361}{\_BMI088\_ACC\_ACC\_CONF\_ACC\_OSR\_SHFITS}})\ |}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00232}00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a9556cba51bda73a37924cd057682b2b3}{acc\_odr}}\ <<\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_af197c0a05dc07ed26712932ce7cb2f13}{\_BMI088\_ACC\_ACC\_CONF\_ACC\_ODR\_SHFITS}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00233}00233\ \ \ uint8\_t\ acc\_init\_config[4][2]\ =\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00234}00234\ \ \ \ \ \ \ \{\mbox{\hyperlink{_b_m_i088__reg_8hpp_a94d04d0a52dc93fe34ab0d90146fa1fa}{BMI088\_ACC\_ACC\_RANGE}},\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_aab5503ee855c9842317e46e340365a75}{acc\_range}}\},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00235}00235\ \ \ \ \ \ \ \{\mbox{\hyperlink{_b_m_i088__reg_8hpp_a6cabbe16234ea294944c1681d349ad37}{BMI088\_ACC\_ACC\_CONF}},\ acc\_conf\},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00236}00236\ \ \ \ \ \ \ \{\mbox{\hyperlink{_b_m_i088__reg_8hpp_a9514af79d27808ca77f49de37741d1a5}{BMI088\_ACC\_ACC\_PWR\_CTRL}},\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_ac8d38427f08bb2343ce5b25093c5072c}{BMI088\_ACC\_ACC\_PWR\_CTRL\_ON}}\},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00237}00237\ \ \ \ \ \ \ \{\mbox{\hyperlink{_b_m_i088__reg_8hpp_a97197867ec26383f3558215b851a573d}{BMI088\_ACC\_ACC\_PWR\_CONF}},\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_a0a896d645a713eb6150404fa64efb4bb}{BMI088\_ACC\_ACC\_PWR\_CONF\_ACTIVE\_MODE}}\}\};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00238}00238\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00239}00239\ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00240}00240\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a7bbb5b66f79a9d0d40edf7f809743d59}{accWrite}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_a7a96d84044869e1006f5dde9df656076}{BMI088\_ACC\_ACC\_SOFTRESET}},\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_a2403e8b99e3128494b9be2828de1b5f7}{BMI088\_ACC\_ACC\_SOFTRESET\_VALUE}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00241}00241\ \ \ HAL\_Delay(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2892b2630935424b98256bbac46b7c76}{kAccResetTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00242}00242\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00243}00243\ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00244}00244\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a3d46ca9f969584dbbc7060a0665edd0a}{accRead}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_a464aa60f701f4fcb2207e84e938f02a8}{BMI088\_ACC\_ACC\_CHIP\_ID}});\ \ \textcolor{comment}{//\ 假读取}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00245}00245\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00246}00246\ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ i\ =\ 0;\ i\ <\ 4;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00247}00247\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00248}00248\ \ \ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a7bbb5b66f79a9d0d40edf7f809743d59}{accWrite}}(acc\_init\_config[i][0],\ acc\_init\_config[i][1]);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00249}00249\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2197d124ccde446fa944ac4c53ddca63}{kCheckWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00250}00250\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a3d46ca9f969584dbbc7060a0665edd0a}{accRead}}(acc\_init\_config[i][0])\ !=\ acc\_init\_config[i][1])\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00251}00251\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa3275cd83116cc9f6625817cfad14a433}{kBMI088ErrStateAccConfigErr}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00252}00252\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00253}00253\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00254}00254\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00255}00255\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f}{kBMI088ErrStateNoErr}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00256}00256\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00257}00257\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00264}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a88754aa2ebac6fcdfde4c5ce4de33dd6}{00264}}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6faf}{BMI088ErrState}}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a88754aa2ebac6fcdfde4c5ce4de33dd6}{BMI088::gyroInit}}(\textcolor{keywordtype}{bool}\ self\_test)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00265}00265\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00266}00266\ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00267}00267\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a16b8a6609a3b902bc05c4e2857801cd2}{gyroRead}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_a111dfc62522a55fdb1913f6162a3ddfa}{BMI088\_GYRO\_GYRO\_CHIP\_ID}})\ !=\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_aa3ba99a02a11fd7bdcb3c235c070f588}{BMI088\_GYRO\_GYRO\_CHIP\_ID\_VALUE}})\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00268}00268\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafaf36788cb829d6f706bbfc614d824e1bf}{kBMI088ErrStateGyroNotFound}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00269}00269\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00270}00270\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00271}00271\ \ \ \textcolor{keywordflow}{if}\ (self\_test)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00272}00272\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ac8c0c2e64b56c3feb6888446b4830be3}{gyroSelfTest}}()\ !=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f}{kBMI088ErrStateNoErr}})\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00273}00273\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa5ac7ace53ccf983ab0f56f8e09fb4290}{kBMI088ErrStateGyroSelfTestFailed}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00274}00274\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00275}00275\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00276}00276\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00277}00277\ \ \ \textcolor{comment}{//\ 配置一些寄存器}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00278}00278\ \ \ uint8\_t\ gyro\_bandwidth\ =\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a5bc01ce6575fd795b95b4ace89c7d3e2}{gyro\_odr\_fbw}}\ |}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00279}00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_b_m_i088__reg_8hpp_ac0b5c42bc668a4f1d4e701d916fceca2}{BMI088\_GYRO\_GYRO\_BANDWIDTH\_MUST\_SET}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00280}00280\ \ \ uint8\_t\ gyro\_init\_config[3][2]\ =\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00281}00281\ \ \ \ \ \ \ \{\mbox{\hyperlink{_b_m_i088__reg_8hpp_adae803e32838eeeba32504566993e5e4}{BMI088\_GYRO\_GYRO\_RANGE}},\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a971c0dc188f60ebd746e5016abeec630}{gyro\_range}}\},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00282}00282\ \ \ \ \ \ \ \{\mbox{\hyperlink{_b_m_i088__reg_8hpp_a49b1f262ca24421b6f1c6a28131629d5}{BMI088\_GYRO\_GYRO\_BANDWIDTH}},\ gyro\_bandwidth\},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00283}00283\ \ \ \ \ \ \ \{\mbox{\hyperlink{_b_m_i088__reg_8hpp_a555699e12c1fc0a97363fe6881208a68}{BMI088\_GYRO\_GYRO\_LPM1}},\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_ada1a723751c84658bd35bb53f6133662}{BMI088\_GYRO\_GYRO\_LPM1\_NORMAL}}\}\};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00284}00284\ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00285}00285\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_adf2ebc011e80e2ad115716307c773c6f}{gyroWrite}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_a5eea1e216988cdde51d47d1ef7b302b6}{BMI088\_GYRO\_GYRO\_SOFTRESET}},\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_a6e0561366a94c357b65a0d73315aff16}{BMI088\_GYRO\_GYRO\_SOFTRESET\_VALUE}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00286}00286\ \ \ HAL\_Delay(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_ae62089d70213a8ed855a551b64eccb53}{kGyroResetTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00287}00287\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00288}00288\ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ i\ =\ 0;\ i\ <\ 3;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00289}00289\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00290}00290\ \ \ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_adf2ebc011e80e2ad115716307c773c6f}{gyroWrite}}(gyro\_init\_config[i][0],\ gyro\_init\_config[i][1]);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00291}00291\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2197d124ccde446fa944ac4c53ddca63}{kCheckWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00292}00292\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a16b8a6609a3b902bc05c4e2857801cd2}{gyroRead}}(gyro\_init\_config[i][0])\ !=\ gyro\_init\_config[i][1])\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00293}00293\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafaa325e1db5049d081cd037fe9d8c642f3}{kBMI088ErrStateGyroConfigErr}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00294}00294\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00295}00295\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00296}00296\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00297}00297\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f}{kBMI088ErrStateNoErr}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00298}00298\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00299}00299\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00305}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a7bc81c0ed908d469d3c0bde126a80311}{00305}}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6faf}{BMI088ErrState}}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a7bc81c0ed908d469d3c0bde126a80311}{BMI088::accSelfTest}}(\textcolor{keywordtype}{void})\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00306}00306\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00307}00307\ \ \ uint8\_t\ acc\_init\_config[4][2]\ =\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00308}00308\ \ \ \ \ \ \ \{\mbox{\hyperlink{_b_m_i088__reg_8hpp_a94d04d0a52dc93fe34ab0d90146fa1fa}{BMI088\_ACC\_ACC\_RANGE}},\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_aca7dfd7218302e42090dea77fa023e28}{BMI088\_ACC\_ACC\_RANGE\_ACC\_RANGE\_24G}}\},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00309}00309\ \ \ \ \ \ \ \{\mbox{\hyperlink{_b_m_i088__reg_8hpp_a6cabbe16234ea294944c1681d349ad37}{BMI088\_ACC\_ACC\_CONF}},\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_a9a8e968b02a3089e7d227f16497c3e67}{BMI088\_ACC\_ACC\_CONF\_NORMAL}}\ |}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00310}00310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_b_m_i088__reg_8hpp_a419eade8e4337034ab30c6b1c774323c}{BMI088\_ACC\_ACC\_CONF\_ACC\_ODR\_1600\_HZ}}\},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00311}00311\ \ \ \ \ \ \ \{\mbox{\hyperlink{_b_m_i088__reg_8hpp_a9514af79d27808ca77f49de37741d1a5}{BMI088\_ACC\_ACC\_PWR\_CTRL}},\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_ac8d38427f08bb2343ce5b25093c5072c}{BMI088\_ACC\_ACC\_PWR\_CTRL\_ON}}\},}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00312}00312\ \ \ \ \ \ \ \{\mbox{\hyperlink{_b_m_i088__reg_8hpp_a97197867ec26383f3558215b851a573d}{BMI088\_ACC\_ACC\_PWR\_CONF}},\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_a0a896d645a713eb6150404fa64efb4bb}{BMI088\_ACC\_ACC\_PWR\_CONF\_ACTIVE\_MODE}}\}\};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00313}00313\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00314}00314\ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ i\ =\ 0;\ i\ <\ 4;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00315}00315\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00316}00316\ \ \ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a7bbb5b66f79a9d0d40edf7f809743d59}{accWrite}}(acc\_init\_config[i][0],\ acc\_init\_config[i][1]);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00317}00317\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2197d124ccde446fa944ac4c53ddca63}{kCheckWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00318}00318\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a3d46ca9f969584dbbc7060a0665edd0a}{accRead}}(acc\_init\_config[i][0])\ !=\ acc\_init\_config[i][1])\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00319}00319\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa1fd3e7bba87b31d71a08e2b72646a3fd}{kBMI088ErrStateAccSelfTestFailed}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00320}00320\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00321}00321\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00322}00322\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00323}00323\ \ \ HAL\_Delay(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a4b69bffbbe7c394213f4ba63f4d4e2b7}{kAccSelfTestShortDelay}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00324}00324\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00325}00325\ \ \ \textcolor{keywordtype}{float}\ pos\_self\_test\_data[3],\ neg\_self\_test\_data[3];}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00326}00326\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00327}00327\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a7bbb5b66f79a9d0d40edf7f809743d59}{accWrite}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_ab5c7deeed8f250205c297a07fc4290f7}{BMI088\_ACC\_ACC\_SELF\_TEST}},\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_aba28bf598e3474800d22a64fd1e347db}{BMI088\_ACC\_ACC\_SELF\_TEST\_POSITIVE\_SIGNAL}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00328}00328\ \ \ HAL\_Delay(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a4d1a7ebd52abf9b9b515be763a3e76e2}{kAccSelfTestLongDelay}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00329}00329\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ad236f84f69a0ef4e8befa96479bf5618}{getAccData}}(pos\_self\_test\_data);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00330}00330\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00331}00331\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a7bbb5b66f79a9d0d40edf7f809743d59}{accWrite}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_ab5c7deeed8f250205c297a07fc4290f7}{BMI088\_ACC\_ACC\_SELF\_TEST}},\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_a2265bb0e8d006b3b60943df8bfaf96e3}{BMI088\_ACC\_ACC\_SELF\_TEST\_NEGATIVE\_SIGNAL}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00332}00332\ \ \ HAL\_Delay(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a4d1a7ebd52abf9b9b515be763a3e76e2}{kAccSelfTestLongDelay}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00333}00333\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ad236f84f69a0ef4e8befa96479bf5618}{getAccData}}(neg\_self\_test\_data);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00334}00334\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00335}00335\ \ \ \textcolor{keywordtype}{float}\ min\_diff\_thres[3]\ =\ \{\mbox{\hyperlink{namespacehello__world_a8582e15cc16c32ad80a0d6873cf3f830}{kGravAcc}},\ \mbox{\hyperlink{namespacehello__world_a8582e15cc16c32ad80a0d6873cf3f830}{kGravAcc}},\ 0.5\ *\ \mbox{\hyperlink{namespacehello__world_a8582e15cc16c32ad80a0d6873cf3f830}{kGravAcc}}\};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00336}00336\ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ i\ =\ 0;\ i\ <\ 3;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00337}00337\ \ \ \ \ \textcolor{keywordflow}{if}\ (pos\_self\_test\_data[i]\ -\/\ neg\_self\_test\_data[i]\ <\ min\_diff\_thres[i])\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00338}00338\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa1fd3e7bba87b31d71a08e2b72646a3fd}{kBMI088ErrStateAccSelfTestFailed}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00339}00339\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00340}00340\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00341}00341\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00342}00342\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f}{kBMI088ErrStateNoErr}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00343}00343\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00344}00344\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00350}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ac8c0c2e64b56c3feb6888446b4830be3}{00350}}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6faf}{BMI088ErrState}}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ac8c0c2e64b56c3feb6888446b4830be3}{BMI088::gyroSelfTest}}(\textcolor{keywordtype}{void})\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00351}00351\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00352}00352\ \ \ \textcolor{comment}{//\ 配置一些寄存器}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00353}00353\ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00354}00354\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_adf2ebc011e80e2ad115716307c773c6f}{gyroWrite}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_a7b45feecb36446f0279f158a238c29ad}{BMI088\_GYRO\_GYRO\_SELF\_TEST}},\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_a3c76e6933674ba4a69aa92b378e9f3f5}{BMI088\_GYRO\_GYRO\_SELF\_TEST\_TRIG\_BIST}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00355}00355\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00356}00356\ \ \ uint8\_t\ test\_result;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00357}00357\ \ \ \textcolor{keywordflow}{while}\ (1)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00358}00358\ \ \ \ \ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a2c70146ac241152592c8643c2ddbd571}{kCommWaitTime}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00359}00359\ \ \ \ \ test\_result\ =\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a16b8a6609a3b902bc05c4e2857801cd2}{gyroRead}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_a7b45feecb36446f0279f158a238c29ad}{BMI088\_GYRO\_GYRO\_SELF\_TEST}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00360}00360\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00361}00361\ \ \ \ \ \textcolor{keywordflow}{if}\ (test\_result\ \&\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_a38ae947f46e410c98768b4284f4c2799}{BMI088\_GYRO\_GYRO\_SELF\_TEST\_BIST\_RDY}})\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00362}00362\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (test\_result\ \&\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_a70daf67398f8b8f91a4e437b696c8826}{BMI088\_GYRO\_GYRO\_SELF\_TEST\_BIST\_FAIL}})\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00363}00363\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa5ac7ace53ccf983ab0f56f8e09fb4290}{kBMI088ErrStateGyroSelfTestFailed}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00364}00364\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00365}00365\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f}{kBMI088ErrStateNoErr}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00366}00366\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00367}00367\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00368}00368\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00369}00369\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00370}00370\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00377}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a00755ad04aebc2df220b39f1a83bf811}{00377}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a00755ad04aebc2df220b39f1a83bf811}{BMI088::getGyroData}}(\textcolor{keywordtype}{float}\ gyro\_data[3])\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00378}00378\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00379}00379\ \ \ uint8\_t\ gyro\_raw\_data[\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a3e4baaf9203b036df28de0609668d42f}{kGyroRawDataLen}}];}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00380}00380\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a443cf9b8f3e44acea8ac21258b4d7363}{gyroMultiRead}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_a59395733e43e82b15084d632dce434b0}{BMI088\_GYRO\_RATE\_X\_LSB}},\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a3e4baaf9203b036df28de0609668d42f}{kGyroRawDataLen}},\ gyro\_raw\_data);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00381}00381\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00382}00382\ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ i\ =\ 0;\ i\ <\ 3;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00383}00383\ \ \ \ \ gyro\_data[i]\ =\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a0ed80ae63f77153e0821addb336446e2}{kGyroSens}}[\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_a971c0dc188f60ebd746e5016abeec630}{gyro\_range}}]\ *}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00384}00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}int16\_t\textcolor{keyword}{>}(}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00385}00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gyro\_raw\_data[2\ *\ i]\ |\ gyro\_raw\_data[2\ *\ i\ +\ 1]\ <<\ 8);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00386}00386\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00387}00387\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00388}00388\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00395}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ad236f84f69a0ef4e8befa96479bf5618}{00395}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ad236f84f69a0ef4e8befa96479bf5618}{BMI088::getAccData}}(\textcolor{keywordtype}{float}\ acc\_data[3])\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00396}00396\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00397}00397\ \ \ uint8\_t\ acc\_raw\_data[\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a9c07d818a5232e233e78057af4cc4f29}{kAccRawDataLen}}];}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00398}00398\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ad8bdc7c9eee4bb3c35ee8467df9e49ae}{accMultiRead}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_a3de924f591b6e8b05d2b2ee2e12f1da5}{BMI088\_ACC\_ACC\_X\_LSB}},\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a9c07d818a5232e233e78057af4cc4f29}{kAccRawDataLen}},\ acc\_raw\_data);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00399}00399\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00400}00400\ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ i\ =\ 0;\ i\ <\ 3;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00401}00401\ \ \ \ \ acc\_data[i]\ =\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a5a86856961df34d30843390644886532}{kAccSens}}[\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_aa93aefcfca4698ac808d528ad032f73a}{config\_}}.\mbox{\hyperlink{structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_aab5503ee855c9842317e46e340365a75}{acc\_range}}]\ *}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00402}00402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}int16\_t\textcolor{keyword}{>}(}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00403}00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ acc\_raw\_data[2\ *\ i]\ |\ acc\_raw\_data[2\ *\ i\ +\ 1]\ <<\ 8);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00404}00404\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00405}00405\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00406}00406\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00412}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a0672cec3591e037942c7bc03b31dd24a}{00412}}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a0672cec3591e037942c7bc03b31dd24a}{BMI088::getTemp}}(\textcolor{keywordtype}{void})\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00413}00413\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00414}00414\ \ \ uint8\_t\ temp\_raw\_data[\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_ae4969e35172560587100082bfede3aef}{kTempRawDataLen}}];}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00415}00415\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ad8bdc7c9eee4bb3c35ee8467df9e49ae}{accMultiRead}}(\mbox{\hyperlink{_b_m_i088__reg_8hpp_a40bf07cf7605757e9ff4e2b73c5e118a}{BMI088\_ACC\_TEMP\_MSB}},\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_ae4969e35172560587100082bfede3aef}{kTempRawDataLen}},\ temp\_raw\_data);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00416}00416\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00417}00417\ \ \ int16\_t\ temp\_raw\ =}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00418}00418\ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}((temp\_raw\_data[0]\ <<\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_a1601f0939849a170124bf8ab523b0d9b}{\_BMI088\_ACC\_TEMP\_MSB\_SHIFTS}})\ |}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00419}00419\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (temp\_raw\_data[1]\ >>\ \mbox{\hyperlink{_b_m_i088__reg_8hpp_a7f4d5277e5d124b71a7fb47eb9c3773b}{\_BMI088\_ACC\_TEMP\_LSB\_SHIFTS}}));}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00420}00420\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00421}00421\ \ \ \textcolor{keywordflow}{if}\ (temp\_raw\ >\ 1023)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00422}00422\ \ \ \ \ temp\_raw\ -\/=\ 2048;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00423}00423\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00424}00424\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00425}00425\ \ \ \textcolor{keywordflow}{return}\ temp\_raw\ *\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a27ec247e96dea1a69a25048e94e108ee}{kTempSens}}\ +\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a3ca6e2287a6e1578dcae2f9837721962}{kTempOffset}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00426}00426\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00427}00427\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00435}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_adf2ebc011e80e2ad115716307c773c6f}{00435}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_adf2ebc011e80e2ad115716307c773c6f}{BMI088::gyroWrite}}(uint8\_t\ mem\_addr,\ uint8\_t\ value)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00436}00436\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00437}00437\ \ \ uint8\_t\ tx\_data[2]\ =\ \{mem\_addr\ |=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_af60d7777256f8e7b1383437df9d7c420}{kWriteSign}},\ value\};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00438}00438\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ac7e428dbf85a72f9b9689a78e7e73f02}{gyroCsL}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00439}00439\ \ \ HAL\_SPI\_Transmit(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a0ee5a0515702e260c800cf20c3a64fe1}{kHspi\_}},\ tx\_data,\ 2,\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afd57b9ff2061310de106415ffdb4888a}{kSpiTimeout}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00440}00440\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a54cd103bad13c06059088197dabd6acc}{gyroCsH}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00441}00441\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00442}00442\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00449}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a16b8a6609a3b902bc05c4e2857801cd2}{00449}}\ uint8\_t\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a16b8a6609a3b902bc05c4e2857801cd2}{BMI088::gyroRead}}(uint8\_t\ mem\_addr)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00450}00450\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00451}00451\ \ \ uint8\_t\ rx\_data[2],\ tx\_data[2]\ =\ \{mem\_addr\ |=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_aa8d641907aa367b051e7f14cdea8673c}{kReadSign}},\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}}\};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00452}00452\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ac7e428dbf85a72f9b9689a78e7e73f02}{gyroCsL}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00453}00453\ \ \ HAL\_SPI\_TransmitReceive(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a0ee5a0515702e260c800cf20c3a64fe1}{kHspi\_}},\ tx\_data,\ rx\_data,\ 2,\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afd57b9ff2061310de106415ffdb4888a}{kSpiTimeout}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00454}00454\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a54cd103bad13c06059088197dabd6acc}{gyroCsH}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00455}00455\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00456}00456\ \ \ \textcolor{keywordflow}{return}\ rx\_data[1];}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00457}00457\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00458}00458\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00467}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a443cf9b8f3e44acea8ac21258b4d7363}{00467}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a443cf9b8f3e44acea8ac21258b4d7363}{BMI088::gyroMultiRead}}(}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00468}00468\ \ \ \ \ uint8\_t\ start\_mem\_addr,\ uint8\_t\ len,\ uint8\_t\ rx\_data[])\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00469}00469\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00470}00470\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ac7e428dbf85a72f9b9689a78e7e73f02}{gyroCsL}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00471}00471\ \ \ start\_mem\_addr\ |=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_aa8d641907aa367b051e7f14cdea8673c}{kReadSign}};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00472}00472\ \ \ HAL\_SPI\_Transmit(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a0ee5a0515702e260c800cf20c3a64fe1}{kHspi\_}},\ \&start\_mem\_addr,\ 1,\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afd57b9ff2061310de106415ffdb4888a}{kSpiTimeout}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00473}00473\ \ \ HAL\_SPI\_TransmitReceive(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a0ee5a0515702e260c800cf20c3a64fe1}{kHspi\_}},\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_af1a33535f593f71f8f97bfe690bba84f}{kPaddingData}},\ rx\_data,\ len,\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afd57b9ff2061310de106415ffdb4888a}{kSpiTimeout}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00474}00474\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a54cd103bad13c06059088197dabd6acc}{gyroCsH}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00475}00475\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00476}00476\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00484}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a7bbb5b66f79a9d0d40edf7f809743d59}{00484}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a7bbb5b66f79a9d0d40edf7f809743d59}{BMI088::accWrite}}(uint8\_t\ mem\_addr,\ uint8\_t\ value)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00485}00485\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00486}00486\ \ \ uint8\_t\ pTxData[2]\ =\ \{mem\_addr\ |=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_af60d7777256f8e7b1383437df9d7c420}{kWriteSign}},\ value\};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00487}00487\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ad1ea4fa147f8bb2da18049c229404f65}{accCsL}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00488}00488\ \ \ HAL\_SPI\_Transmit(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a0ee5a0515702e260c800cf20c3a64fe1}{kHspi\_}},\ pTxData,\ 2,\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afd57b9ff2061310de106415ffdb4888a}{kSpiTimeout}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00489}00489\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_abe2be687095fa7b54d31a3a69693b306}{accCsH}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00490}00490\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00491}00491\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00498}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a3d46ca9f969584dbbc7060a0665edd0a}{00498}}\ uint8\_t\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a3d46ca9f969584dbbc7060a0665edd0a}{BMI088::accRead}}(uint8\_t\ mem\_addr)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00499}00499\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00500}00500\ \ \ uint8\_t\ rx\_data[3],\ tx\_data[3]\ =\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00501}00501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mem\_addr\ |=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_aa8d641907aa367b051e7f14cdea8673c}{kReadSign}},\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}},\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}}\};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00502}00502\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ad1ea4fa147f8bb2da18049c229404f65}{accCsL}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00503}00503\ \ \ HAL\_SPI\_TransmitReceive(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a0ee5a0515702e260c800cf20c3a64fe1}{kHspi\_}},\ tx\_data,\ rx\_data,\ 3,\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afd57b9ff2061310de106415ffdb4888a}{kSpiTimeout}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00504}00504\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_abe2be687095fa7b54d31a3a69693b306}{accCsH}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00505}00505\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00506}00506\ \ \ \textcolor{keywordflow}{return}\ rx\_data[2];}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00507}00507\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00508}00508\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00517}\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ad8bdc7c9eee4bb3c35ee8467df9e49ae}{00517}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ad8bdc7c9eee4bb3c35ee8467df9e49ae}{BMI088::accMultiRead}}(}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00518}00518\ \ \ \ \ uint8\_t\ start\_mem\_addr,\ uint8\_t\ len,\ uint8\_t\ rx\_data[])\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00519}00519\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00520}00520\ \ \ uint8\_t\ tx\_data[2]\ =\ \{start\_mem\_addr\ |=\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_aa8d641907aa367b051e7f14cdea8673c}{kReadSign}},\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a56a2243330f6d9b007aae341d01b6f29}{kPaddingValue}}\};}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00521}00521\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00522}00522\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_ad1ea4fa147f8bb2da18049c229404f65}{accCsL}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00523}00523\ \ \ HAL\_SPI\_TransmitReceive(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a0ee5a0515702e260c800cf20c3a64fe1}{kHspi\_}},\ tx\_data,\ rx\_data,\ 2,\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afd57b9ff2061310de106415ffdb4888a}{kSpiTimeout}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00524}00524\ \ \ HAL\_SPI\_TransmitReceive(\mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_a0ee5a0515702e260c800cf20c3a64fe1}{kHspi\_}},\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_af1a33535f593f71f8f97bfe690bba84f}{kPaddingData}},\ rx\_data,\ len,\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_afd57b9ff2061310de106415ffdb4888a}{kSpiTimeout}});}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00525}00525\ \ \ \mbox{\hyperlink{classhello__world_1_1devices_1_1imu_1_1_b_m_i088_abe2be687095fa7b54d31a3a69693b306}{accCsH}}();}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00526}00526\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00527}00527\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00534}\mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{00534}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacehello__world_1_1devices_1_1imu_a6fc8717b2ca9de9512855bad4d226769}{DelayUs}}(uint16\_t\ us)}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00535}00535\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00536}00536\ \ \ uint32\_t\ reload\ =\ SysTick-\/>LOAD;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00537}00537\ \ \ uint32\_t\ ticks\ =\ us\ *\ (SystemCoreClock\ /\ 1e6f);}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00538}00538\ \ \ uint32\_t\ t\_last\ =\ SysTick-\/>VAL;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00539}00539\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00540}00540\ \ \ uint32\_t\ t\_now\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00541}00541\ \ \ uint32\_t\ t\_cnt\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00542}00542\ }
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00543}00543\ \ \ \textcolor{keywordflow}{while}\ (t\_cnt\ <\ ticks)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00544}00544\ \ \ \ \ t\_now\ =\ SysTick-\/>VAL;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00545}00545\ \ \ \ \ \textcolor{keywordflow}{if}\ (t\_now\ !=\ t\_last)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00546}00546\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (t\_now\ <\ t\_last)\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00547}00547\ \ \ \ \ \ \ \ \ t\_cnt\ +=\ t\_last\ -\/\ t\_now;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00548}00548\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00549}00549\ \ \ \ \ \ \ \ \ t\_cnt\ +=\ reload\ -\/\ t\_now\ +\ t\_last;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00550}00550\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00551}00551\ \ \ \ \ \ \ t\_last\ =\ t\_now;}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00552}00552\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00553}00553\ \ \ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00554}00554\ \}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00555}00555\ \}\ \ \textcolor{comment}{//\ namespace\ imu}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00556}00556\ \}\ \ \textcolor{comment}{//\ namespace\ devices}}
\DoxyCodeLine{\Hypertarget{_b_m_i088_8cpp_source_l00557}00557\ \}\ \ \textcolor{comment}{//\ namespace\ hello\_world}}

\end{DoxyCode}
