\doxysection{hello\+\_\+world\+::algorithms\+::controller\+::pid\+::Diff\+Previous类 参考}
\hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous}{}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous}\index{hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}}


微分先行优化类  




{\ttfamily \#include $<$pid\+\_\+opt.\+hpp$>$}

\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a89d9400882a9039da7729e0abcc9f205}{Diff\+Previous}} (float weight=0.\+5)
\begin{DoxyCompactList}\small\item\em 构造函数，初始化微分先行优化参数 \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacehello__world_1_1algorithms_1_1controller_a3651797f880533c49c9b90a0961c199d}{State}} \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a9aaa5c9fe1d78f62d54f12f6b4bc773e}{set\+Enabled}} (float weight)
\begin{DoxyCompactList}\small\item\em 设置是否启用微分先行优化 \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacehello__world_1_1algorithms_1_1controller_a3651797f880533c49c9b90a0961c199d}{State}} \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a6e067e78fbba8b78694c53ee6bdc4cc7}{set\+Weight}} (float weight)
\begin{DoxyCompactList}\small\item\em 设置对输出微分的权重值 \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacehello__world_1_1algorithms_1_1controller_a3651797f880533c49c9b90a0961c199d}{State}} \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a4e192c0d515a1bfb5b8cc3f0f2772e9c}{set\+Params}} (float weight)
\begin{DoxyCompactList}\small\item\em 设置微分先行优化参数 \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a2407309871346e34031d483bb9974daa}{is\+Legal}} ()
\begin{DoxyCompactList}\small\item\em 检查微分先行优化参数是否合法 当且仅当 {\ttfamily 0 \texorpdfstring{$<$}{<}= weight\+\_\+ \&\& weight\+\_\+ \texorpdfstring{$<$}{<}= 1} \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a251efdca45313d86ab0daa779583255f}{is\+Enabled}} ()
\begin{DoxyCompactList}\small\item\em 检查是否启用了微分先行优化 \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_ac654422982d9475cf5c6f6c061cd2aeb}{calc}} (float fdb, float last\+\_\+fdb, float err, float last\+\_\+err)
\begin{DoxyCompactList}\small\item\em 计算微分先行优化后的输出值 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 成员函数}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a68e08fa7ab70f66f0ba633ff139b7c27}{handle\+Illegal\+Params}} ()
\begin{DoxyCompactList}\small\item\em 处理非法参数 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
float \mbox{\hyperlink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_ad085fab9a4dbec69506b1effe527a60f}{weight\+\_\+}}
\begin{DoxyCompactList}\small\item\em 对输出微分的权重值，同时作为是否启用的标志 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
微分先行优化类 

为避免由于给定值频繁升降（尤其是阶跃）而引起的系统振荡，可采用只对输出(或反馈值)微分的优化算法。 这样，在改变给定值时，微分项输出仅与被控量的变化相关，而这种变化通常是比较缓和的，从而能够明显改善系统的动态特性。 更进一步，将对输入误差微分和对输出微分采用加权求和的方式结合起来。


\begin{DoxyItemize}
\item 具体计算公式见{\ttfamily \doxylink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_ac654422982d9475cf5c6f6c061cd2aeb}{calc(float fdb, float last\+\_\+fdb, float err, float last\+\_\+err)}}。
\item 参数合法性检查见{\ttfamily \doxylink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a2407309871346e34031d483bb9974daa}{is\+Legal()}}。
\item 启用判定见{\ttfamily \doxylink{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a251efdca45313d86ab0daa779583255f}{is\+Enabled()}}。 
\end{DoxyItemize}

在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00791}{791}} 行定义.



\doxysubsection{构造及析构函数说明}
\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a89d9400882a9039da7729e0abcc9f205}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a89d9400882a9039da7729e0abcc9f205} 
\index{hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}!DiffPrevious@{DiffPrevious}}
\index{DiffPrevious@{DiffPrevious}!hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}}
\doxysubsubsection{\texorpdfstring{DiffPrevious()}{DiffPrevious()}}
{\footnotesize\ttfamily hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Diff\+Previous\+::\+Diff\+Previous (\begin{DoxyParamCaption}\item[{float}]{weight = {\ttfamily 0.5} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



构造函数，初始化微分先行优化参数 


\begin{DoxyParams}{参数}
{\em weight} & 对输出微分的权重值，默认值为0.5 \\
\hline
\end{DoxyParams}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00798}{798}} 行定义.



\doxysubsection{成员函数说明}
\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_ac654422982d9475cf5c6f6c061cd2aeb}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_ac654422982d9475cf5c6f6c061cd2aeb} 
\index{hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}!calc@{calc}}
\index{calc@{calc}!hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}}
\doxysubsubsection{\texorpdfstring{calc()}{calc()}}
{\footnotesize\ttfamily float hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Diff\+Previous\+::calc (\begin{DoxyParamCaption}\item[{float}]{fdb,  }\item[{float}]{last\+\_\+fdb,  }\item[{float}]{err,  }\item[{float}]{last\+\_\+err }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



计算微分先行优化后的输出值 

具体的计算公式为：  \[\frac{u_d(k)}{T(k)K_d}=\begin{cases}
w*[y(k)-y(k-1)]+(1-w)*[e(k)-e(k=1)]  & ,  w \in (0,1]   \\
e(k)-e(k=1)  & ,others
\end{cases}
\]， 其中 $\epsilon_l$ 为参数中的下限值， $\epsilon_u$为参数中的上限值， $w$为参数中的权重值 
\begin{DoxyParams}{参数}
{\em fdb} & 本次采样的反馈值 \\
\hline
{\em last\+\_\+fdb} & 上次采样的反馈值 \\
\hline
{\em err} & 本次采样的误差值 \\
\hline
{\em last\+\_\+err} & 上次采样的误差值 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
本次采样的微分先行优化后的输出值 
\end{DoxyReturn}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00860}{860}} 行定义.

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_ac654422982d9475cf5c6f6c061cd2aeb_icgraph}
\end{center}
\end{figure}
\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a68e08fa7ab70f66f0ba633ff139b7c27}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a68e08fa7ab70f66f0ba633ff139b7c27} 
\index{hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}!handleIllegalParams@{handleIllegalParams}}
\index{handleIllegalParams@{handleIllegalParams}!hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}}
\doxysubsubsection{\texorpdfstring{handleIllegalParams()}{handleIllegalParams()}}
{\footnotesize\ttfamily bool hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Diff\+Previous\+::handle\+Illegal\+Params (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



处理非法参数 

\begin{DoxyReturn}{返回}
如果存在非法参数返回true，否则返回false 
\end{DoxyReturn}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00876}{876}} 行定义.

\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a251efdca45313d86ab0daa779583255f}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a251efdca45313d86ab0daa779583255f} 
\index{hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}!isEnabled@{isEnabled}}
\index{isEnabled@{isEnabled}!hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}}
\doxysubsubsection{\texorpdfstring{isEnabled()}{isEnabled()}}
{\footnotesize\ttfamily bool hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Diff\+Previous\+::is\+Enabled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



检查是否启用了微分先行优化 

\begin{DoxyReturn}{返回}
如果启用了微分先行优化并且参数合法，则返回true，否则返回false 
\end{DoxyReturn}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00840}{840}} 行定义.

\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a2407309871346e34031d483bb9974daa}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a2407309871346e34031d483bb9974daa} 
\index{hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}!isLegal@{isLegal}}
\index{isLegal@{isLegal}!hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}}
\doxysubsubsection{\texorpdfstring{isLegal()}{isLegal()}}
{\footnotesize\ttfamily bool hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Diff\+Previous\+::is\+Legal (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



检查微分先行优化参数是否合法 当且仅当 {\ttfamily 0 \texorpdfstring{$<$}{<}= weight\+\_\+ \&\& weight\+\_\+ \texorpdfstring{$<$}{<}= 1} 

\begin{DoxyReturn}{返回}
参数合法返回true，否则返回false 
\end{DoxyReturn}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00834}{834}} 行定义.

\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a9aaa5c9fe1d78f62d54f12f6b4bc773e}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a9aaa5c9fe1d78f62d54f12f6b4bc773e} 
\index{hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}!setEnabled@{setEnabled}}
\index{setEnabled@{setEnabled}!hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}}
\doxysubsubsection{\texorpdfstring{setEnabled()}{setEnabled()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacehello__world_1_1algorithms_1_1controller_a3651797f880533c49c9b90a0961c199d}{State}} hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Diff\+Previous\+::set\+Enabled (\begin{DoxyParamCaption}\item[{float}]{weight }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



设置是否启用微分先行优化 


\begin{DoxyParams}{参数}
{\em weight} & 对输出微分的权重值 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
设置状态，如果参数合法返回k\+State\+Ok，否则在处理非法参数后返回k\+State\+Error 
\end{DoxyReturn}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00805}{805}} 行定义.

\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a4e192c0d515a1bfb5b8cc3f0f2772e9c}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a4e192c0d515a1bfb5b8cc3f0f2772e9c} 
\index{hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}!setParams@{setParams}}
\index{setParams@{setParams}!hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}}
\doxysubsubsection{\texorpdfstring{setParams()}{setParams()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacehello__world_1_1algorithms_1_1controller_a3651797f880533c49c9b90a0961c199d}{State}} hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Diff\+Previous\+::set\+Params (\begin{DoxyParamCaption}\item[{float}]{weight }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



设置微分先行优化参数 


\begin{DoxyParams}{参数}
{\em weight} & 对输出微分的权重值 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
设置状态，如果参数合法返回k\+State\+Ok，否则在处理非法参数后返回k\+State\+Error 
\end{DoxyReturn}

\begin{DoxyRetVals}{返回值}
{\em k\+State\+OK} & 设置成功且参数合法 \\
\hline
{\em k\+State\+Error} & 设置成功但参数非法 \\
\hline
\end{DoxyRetVals}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00827}{827}} 行定义.

\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a6e067e78fbba8b78694c53ee6bdc4cc7}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_a6e067e78fbba8b78694c53ee6bdc4cc7} 
\index{hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}!setWeight@{setWeight}}
\index{setWeight@{setWeight}!hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}}
\doxysubsubsection{\texorpdfstring{setWeight()}{setWeight()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacehello__world_1_1algorithms_1_1controller_a3651797f880533c49c9b90a0961c199d}{State}} hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Diff\+Previous\+::set\+Weight (\begin{DoxyParamCaption}\item[{float}]{weight }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



设置对输出微分的权重值 


\begin{DoxyParams}{参数}
{\em weight} & 对输出微分的权重值 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
设置状态，如果参数合法返回k\+State\+Ok，否则在处理非法参数后返回k\+State\+Error 
\end{DoxyReturn}

\begin{DoxyRetVals}{返回值}
{\em k\+State\+OK} & 设置成功且参数合法 \\
\hline
{\em k\+State\+Error} & 设置成功但参数非法 \\
\hline
\end{DoxyRetVals}


在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00814}{814}} 行定义.



\doxysubsection{类成员变量说明}
\Hypertarget{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_ad085fab9a4dbec69506b1effe527a60f}\label{classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_ad085fab9a4dbec69506b1effe527a60f} 
\index{hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}!weight\_@{weight\_}}
\index{weight\_@{weight\_}!hello\_world::algorithms::controller::pid::DiffPrevious@{hello\_world::algorithms::controller::pid::DiffPrevious}}
\doxysubsubsection{\texorpdfstring{weight\_}{weight\_}}
{\footnotesize\ttfamily float hello\+\_\+world\+::algorithms\+::controller\+::pid\+::\+Diff\+Previous\+::weight\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



对输出微分的权重值，同时作为是否启用的标志 



在文件 \mbox{\hyperlink{pid__opt_8hpp_source}{pid\+\_\+opt.\+hpp}} 第 \mbox{\hyperlink{pid__opt_8hpp_source_l00870}{870}} 行定义.

