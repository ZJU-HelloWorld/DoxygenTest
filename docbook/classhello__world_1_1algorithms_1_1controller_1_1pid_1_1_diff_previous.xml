<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous" xml:lang="zh">
<title>hello_world::algorithms::controller::pid::DiffPrevious类 参考</title>
<indexterm><primary>hello_world::algorithms::controller::pid::DiffPrevious</primary></indexterm>
<para>

<para>微分先行优化类 </para>
 
</para>
<para>
<computeroutput>#include &lt;pid_opt.hpp&gt;</computeroutput>
</para>
<simplesect>
    <title>Public 成员函数    </title>
        <itemizedlist>
            <listitem><para><link linkend="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a89d9400882a9039da7729e0abcc9f205">DiffPrevious</link> (float weight=0.5)</para>

<para>构造函数，初始化微分先行优化参数 </para>
</listitem>
            <listitem><para><link linkend="_namespacehello__world_1_1algorithms_1_1controller_1a3651797f880533c49c9b90a0961c199d">State</link> <link linkend="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a9aaa5c9fe1d78f62d54f12f6b4bc773e">setEnabled</link> (float weight)</para>

<para>设置是否启用微分先行优化 </para>
</listitem>
            <listitem><para><link linkend="_namespacehello__world_1_1algorithms_1_1controller_1a3651797f880533c49c9b90a0961c199d">State</link> <link linkend="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a6e067e78fbba8b78694c53ee6bdc4cc7">setWeight</link> (float weight)</para>

<para>设置对输出微分的权重值 </para>
</listitem>
            <listitem><para><link linkend="_namespacehello__world_1_1algorithms_1_1controller_1a3651797f880533c49c9b90a0961c199d">State</link> <link linkend="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a4e192c0d515a1bfb5b8cc3f0f2772e9c">setParams</link> (float weight)</para>

<para>设置微分先行优化参数 </para>
</listitem>
            <listitem><para>bool <link linkend="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a2407309871346e34031d483bb9974daa">isLegal</link> ()</para>

<para>检查微分先行优化参数是否合法 当且仅当 <computeroutput>0 &lt;= weight_ &amp;&amp; weight_ &lt;= 1</computeroutput> </para>
</listitem>
            <listitem><para>bool <link linkend="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a251efdca45313d86ab0daa779583255f">isEnabled</link> ()</para>

<para>检查是否启用了微分先行优化 </para>
</listitem>
            <listitem><para>float <link linkend="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1ac654422982d9475cf5c6f6c061cd2aeb">calc</link> (float fdb, float last_fdb, float err, float last_err)</para>

<para>计算微分先行优化后的输出值 </para>
</listitem>
        </itemizedlist>
</simplesect>
<simplesect>
    <title>Private 成员函数    </title>
        <itemizedlist>
            <listitem><para>bool <link linkend="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a68e08fa7ab70f66f0ba633ff139b7c27">handleIllegalParams</link> ()</para>

<para>处理非法参数 </para>
</listitem>
        </itemizedlist>
</simplesect>
<simplesect>
    <title>Private 属性    </title>
        <itemizedlist>
            <listitem><para>float <link linkend="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1ad085fab9a4dbec69506b1effe527a60f">weight_</link></para>

<para>对输出微分的权重值，同时作为是否启用的标志 </para>
</listitem>
        </itemizedlist>
</simplesect>
<section>
<title>详细描述</title>

<para>微分先行优化类 </para>



<para>为避免由于给定值频繁升降（尤其是阶跃）而引起的系统振荡，可采用只对输出(或反馈值)微分的优化算法。 这样，在改变给定值时，微分项输出仅与被控量的变化相关，而这种变化通常是比较缓和的，从而能够明显改善系统的动态特性。 更进一步，将对输入误差微分和对输出微分采用加权求和的方式结合起来。</para>

<para><itemizedlist>
<listitem>
<para>具体计算公式见<computeroutput><link linkend="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1ac654422982d9475cf5c6f6c061cd2aeb">calc(float fdb, float last_fdb, float err, float last_err)</link></computeroutput>。</para>
</listitem><listitem>
<para>参数合法性检查见<computeroutput><link linkend="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a2407309871346e34031d483bb9974daa">isLegal()</link></computeroutput>。</para>
</listitem><listitem>
<para>启用判定见<computeroutput><link linkend="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a251efdca45313d86ab0daa779583255f">isEnabled()</link></computeroutput>。 </para>
</listitem></itemizedlist>
</para>
<para>
在文件 <link linkend="_pid__opt_8hpp_source">pid_opt.hpp</link> 第 <link linkend="_pid__opt_8hpp_source_1l00791">791</link> 行定义.</para>
</section>
<section>
<title>构造及析构函数说明</title>
<anchor xml:id="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a89d9400882a9039da7729e0abcc9f205"/><section>
    <title>DiffPrevious()</title>
<indexterm><primary>DiffPrevious</primary><secondary>hello_world::algorithms::controller::pid::DiffPrevious</secondary></indexterm>
<indexterm><primary>hello_world::algorithms::controller::pid::DiffPrevious</primary><secondary>DiffPrevious</secondary></indexterm>
<para><computeroutput>hello_world::algorithms::controller::pid::DiffPrevious::DiffPrevious (float weight = <computeroutput>0.5</computeroutput>
)<computeroutput>[inline]</computeroutput></computeroutput></para><para>

<para>构造函数，初始化微分先行优化参数 </para>
</para>

<para>
                <formalpara>
                    <title>
参数</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>weight</entry><entry>
<para>对输出微分的权重值，默认值为0.5 </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                </para>
<para>
在文件 <link linkend="_pid__opt_8hpp_source">pid_opt.hpp</link> 第 <link linkend="_pid__opt_8hpp_source_1l00798">798</link> 行定义.</para>
</section>
</section>
<section>
<title>成员函数说明</title>
<anchor xml:id="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1ac654422982d9475cf5c6f6c061cd2aeb"/><section>
    <title>calc()</title>
<indexterm><primary>calc</primary><secondary>hello_world::algorithms::controller::pid::DiffPrevious</secondary></indexterm>
<indexterm><primary>hello_world::algorithms::controller::pid::DiffPrevious</primary><secondary>calc</secondary></indexterm>
<para><computeroutput>float hello_world::algorithms::controller::pid::DiffPrevious::calc (float fdb, float last_fdb, float err, float last_err)<computeroutput>[inline]</computeroutput></computeroutput></para><para>

<para>计算微分先行优化后的输出值 </para>
</para>

<para>具体的计算公式为：          <mediaobject>
            <imageobject>
                <imagedata align="center" valign="middle" scalefit="0" fileref="form_17.png"/>
            </imageobject>
        </mediaobject>
， 其中 <inlinemediaobject>
            <imageobject>
                <imagedata align="center" valign="middle" scalefit="0" fileref="form_11.png"/>
            </imageobject>
</inlinemediaobject>
 为参数中的下限值， <inlinemediaobject>
            <imageobject>
                <imagedata align="center" valign="middle" scalefit="0" fileref="form_12.png"/>
            </imageobject>
</inlinemediaobject>
为参数中的上限值， <inlinemediaobject>
            <imageobject>
                <imagedata align="center" valign="middle" scalefit="0" fileref="form_16.png"/>
            </imageobject>
</inlinemediaobject>
为参数中的权重值 
                <formalpara>
                    <title>
参数</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>fdb</entry><entry>
<para>本次采样的反馈值 </para>
</entry>
                            </row>
                            <row>
<entry>last_fdb</entry><entry>
<para>上次采样的反馈值 </para>
</entry>
                            </row>
                            <row>
<entry>err</entry><entry>
<para>本次采样的误差值 </para>
</entry>
                            </row>
                            <row>
<entry>last_err</entry><entry>
<para>上次采样的误差值 </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>返回</title>

<para>本次采样的微分先行优化后的输出值 </para>
</formalpara>
</para>
<para>
在文件 <link linkend="_pid__opt_8hpp_source">pid_opt.hpp</link> 第 <link linkend="_pid__opt_8hpp_source_1l00860">860</link> 行定义.</para>
这是这个函数的调用关系图:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_ac654422982d9475cf5c6f6c061cd2aeb_icgraph.svg"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
</section>
<anchor xml:id="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a68e08fa7ab70f66f0ba633ff139b7c27"/><section>
    <title>handleIllegalParams()</title>
<indexterm><primary>handleIllegalParams</primary><secondary>hello_world::algorithms::controller::pid::DiffPrevious</secondary></indexterm>
<indexterm><primary>hello_world::algorithms::controller::pid::DiffPrevious</primary><secondary>handleIllegalParams</secondary></indexterm>
<para><computeroutput>bool hello_world::algorithms::controller::pid::DiffPrevious::handleIllegalParams ( )<computeroutput>[inline]</computeroutput>, <computeroutput>[private]</computeroutput></computeroutput></para><para>

<para>处理非法参数 </para>
</para>

<para><formalpara><title>返回</title>

<para>如果存在非法参数返回true，否则返回false </para>
</formalpara>
</para>
<para>
在文件 <link linkend="_pid__opt_8hpp_source">pid_opt.hpp</link> 第 <link linkend="_pid__opt_8hpp_source_1l00876">876</link> 行定义.</para>
</section>
<anchor xml:id="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a251efdca45313d86ab0daa779583255f"/><section>
    <title>isEnabled()</title>
<indexterm><primary>isEnabled</primary><secondary>hello_world::algorithms::controller::pid::DiffPrevious</secondary></indexterm>
<indexterm><primary>hello_world::algorithms::controller::pid::DiffPrevious</primary><secondary>isEnabled</secondary></indexterm>
<para><computeroutput>bool hello_world::algorithms::controller::pid::DiffPrevious::isEnabled ( )<computeroutput>[inline]</computeroutput></computeroutput></para><para>

<para>检查是否启用了微分先行优化 </para>
</para>

<para><formalpara><title>返回</title>

<para>如果启用了微分先行优化并且参数合法，则返回true，否则返回false </para>
</formalpara>
</para>
<para>
在文件 <link linkend="_pid__opt_8hpp_source">pid_opt.hpp</link> 第 <link linkend="_pid__opt_8hpp_source_1l00840">840</link> 行定义.</para>
</section>
<anchor xml:id="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a2407309871346e34031d483bb9974daa"/><section>
    <title>isLegal()</title>
<indexterm><primary>isLegal</primary><secondary>hello_world::algorithms::controller::pid::DiffPrevious</secondary></indexterm>
<indexterm><primary>hello_world::algorithms::controller::pid::DiffPrevious</primary><secondary>isLegal</secondary></indexterm>
<para><computeroutput>bool hello_world::algorithms::controller::pid::DiffPrevious::isLegal ( )<computeroutput>[inline]</computeroutput></computeroutput></para><para>

<para>检查微分先行优化参数是否合法 当且仅当 <computeroutput>0 &lt;= weight_ &amp;&amp; weight_ &lt;= 1</computeroutput> </para>
</para>

<para><formalpara><title>返回</title>

<para>参数合法返回true，否则返回false </para>
</formalpara>
</para>
<para>
在文件 <link linkend="_pid__opt_8hpp_source">pid_opt.hpp</link> 第 <link linkend="_pid__opt_8hpp_source_1l00834">834</link> 行定义.</para>
</section>
<anchor xml:id="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a9aaa5c9fe1d78f62d54f12f6b4bc773e"/><section>
    <title>setEnabled()</title>
<indexterm><primary>setEnabled</primary><secondary>hello_world::algorithms::controller::pid::DiffPrevious</secondary></indexterm>
<indexterm><primary>hello_world::algorithms::controller::pid::DiffPrevious</primary><secondary>setEnabled</secondary></indexterm>
<para><computeroutput><link linkend="_namespacehello__world_1_1algorithms_1_1controller_1a3651797f880533c49c9b90a0961c199d">State</link> hello_world::algorithms::controller::pid::DiffPrevious::setEnabled (float weight)<computeroutput>[inline]</computeroutput></computeroutput></para><para>

<para>设置是否启用微分先行优化 </para>
</para>

<para>
                <formalpara>
                    <title>
参数</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>weight</entry><entry>
<para>对输出微分的权重值 </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>返回</title>

<para>设置状态，如果参数合法返回kStateOk，否则在处理非法参数后返回kStateError </para>
</formalpara>
</para>
<para>
在文件 <link linkend="_pid__opt_8hpp_source">pid_opt.hpp</link> 第 <link linkend="_pid__opt_8hpp_source_1l00805">805</link> 行定义.</para>
</section>
<anchor xml:id="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a4e192c0d515a1bfb5b8cc3f0f2772e9c"/><section>
    <title>setParams()</title>
<indexterm><primary>setParams</primary><secondary>hello_world::algorithms::controller::pid::DiffPrevious</secondary></indexterm>
<indexterm><primary>hello_world::algorithms::controller::pid::DiffPrevious</primary><secondary>setParams</secondary></indexterm>
<para><computeroutput><link linkend="_namespacehello__world_1_1algorithms_1_1controller_1a3651797f880533c49c9b90a0961c199d">State</link> hello_world::algorithms::controller::pid::DiffPrevious::setParams (float weight)<computeroutput>[inline]</computeroutput></computeroutput></para><para>

<para>设置微分先行优化参数 </para>
</para>

<para>
                <formalpara>
                    <title>
参数</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>weight</entry><entry>
<para>对输出微分的权重值 </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>返回</title>

<para>设置状态，如果参数合法返回kStateOk，否则在处理非法参数后返回kStateError </para>
</formalpara>

                <formalpara>
                    <title>
返回值</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>kStateOK</entry><entry>
<para>设置成功且参数合法 </para>
</entry>
                            </row>
                            <row>
<entry>kStateError</entry><entry>
<para>设置成功但参数非法 </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                </para>
<para>
在文件 <link linkend="_pid__opt_8hpp_source">pid_opt.hpp</link> 第 <link linkend="_pid__opt_8hpp_source_1l00827">827</link> 行定义.</para>
</section>
<anchor xml:id="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1a6e067e78fbba8b78694c53ee6bdc4cc7"/><section>
    <title>setWeight()</title>
<indexterm><primary>setWeight</primary><secondary>hello_world::algorithms::controller::pid::DiffPrevious</secondary></indexterm>
<indexterm><primary>hello_world::algorithms::controller::pid::DiffPrevious</primary><secondary>setWeight</secondary></indexterm>
<para><computeroutput><link linkend="_namespacehello__world_1_1algorithms_1_1controller_1a3651797f880533c49c9b90a0961c199d">State</link> hello_world::algorithms::controller::pid::DiffPrevious::setWeight (float weight)<computeroutput>[inline]</computeroutput></computeroutput></para><para>

<para>设置对输出微分的权重值 </para>
</para>

<para>
                <formalpara>
                    <title>
参数</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>weight</entry><entry>
<para>对输出微分的权重值 </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>返回</title>

<para>设置状态，如果参数合法返回kStateOk，否则在处理非法参数后返回kStateError </para>
</formalpara>

                <formalpara>
                    <title>
返回值</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>kStateOK</entry><entry>
<para>设置成功且参数合法 </para>
</entry>
                            </row>
                            <row>
<entry>kStateError</entry><entry>
<para>设置成功但参数非法 </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                </para>
<para>
在文件 <link linkend="_pid__opt_8hpp_source">pid_opt.hpp</link> 第 <link linkend="_pid__opt_8hpp_source_1l00814">814</link> 行定义.</para>
</section>
</section>
<section>
<title>类成员变量说明</title>
<anchor xml:id="_classhello__world_1_1algorithms_1_1controller_1_1pid_1_1_diff_previous_1ad085fab9a4dbec69506b1effe527a60f"/><section>
    <title>weight_</title>
<indexterm><primary>weight_</primary><secondary>hello_world::algorithms::controller::pid::DiffPrevious</secondary></indexterm>
<indexterm><primary>hello_world::algorithms::controller::pid::DiffPrevious</primary><secondary>weight_</secondary></indexterm>
<para><computeroutput>float hello_world::algorithms::controller::pid::DiffPrevious::weight_<computeroutput>[private]</computeroutput></computeroutput></para><para>

<para>对输出微分的权重值，同时作为是否启用的标志 </para>
</para>
<para>
在文件 <link linkend="_pid__opt_8hpp_source">pid_opt.hpp</link> 第 <link linkend="_pid__opt_8hpp_source_1l00870">870</link> 行定义.</para>
</section>
</section>
</section>
