<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__b_m_i088_8cpp_source" xml:lang="zh">
<title>BMI088.cpp</title>
<indexterm><primary>HW-Components/devices/imu/src/BMI088.cpp</primary></indexterm>
浏览该文件的文档.<programlisting linenumbering="unnumbered"><anchor xml:id="__b_m_i088_8cpp_source_1l00001"/>00001 
<anchor xml:id="__b_m_i088_8cpp_source_1l00015"/>00015 <emphasis role="comment">/*&#32;Includes&#32;------------------------------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00016"/>00016 <emphasis role="comment">/*&#32;Private&#32;macro&#32;-------------------------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00017"/>00017 <emphasis role="comment">/*&#32;Private&#32;constants&#32;---------------------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00018"/>00018 <emphasis role="comment">/*&#32;Private&#32;types&#32;-------------------------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00019"/>00019 <emphasis role="comment">/*&#32;Private&#32;variables&#32;---------------------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00020"/>00020 <emphasis role="comment">/*&#32;External&#32;variables&#32;--------------------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00021"/>00021 <emphasis role="comment">/*&#32;Private&#32;function&#32;prototypes&#32;-----------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00022"/>00022 
<anchor xml:id="__b_m_i088_8cpp_source_1l00037"/>00037 <emphasis role="comment">/*&#32;Includes&#32;------------------------------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00038"/>00038 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__b_m_i088_8hpp">BMI088.hpp</link>&quot;</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00039"/>00039 
<anchor xml:id="__b_m_i088_8cpp_source_1l00040"/>00040 <emphasis role="preprocessor">#include&#32;&lt;cstring&gt;</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00041"/>00041 
<anchor xml:id="__b_m_i088_8cpp_source_1l00042"/>00042 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__b_m_i088__reg_8hpp">BMI088_reg.hpp</link>&quot;</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00043"/>00043 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_assert_8hpp">assert.hpp</link>&quot;</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00044"/>00044 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_base_8hpp">base.hpp</link>&quot;</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00045"/>00045 
<anchor xml:id="__b_m_i088_8cpp_source_1l00046"/>00046 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespacehello__world">hello_world</link>
<anchor xml:id="__b_m_i088_8cpp_source_1l00047"/>00047 {
<anchor xml:id="__b_m_i088_8cpp_source_1l00048"/>00048 <emphasis role="keyword">namespace&#32;</emphasis>devices
<anchor xml:id="__b_m_i088_8cpp_source_1l00049"/>00049 {
<anchor xml:id="__b_m_i088_8cpp_source_1l00050"/>00050 <emphasis role="keyword">namespace&#32;</emphasis>imu
<anchor xml:id="__b_m_i088_8cpp_source_1l00051"/>00051 {
<anchor xml:id="__b_m_i088_8cpp_source_1l00052"/>00052 <emphasis role="comment">/*&#32;Private&#32;macro&#32;-------------------------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00053"/>00053 <emphasis role="comment">/*&#32;Private&#32;constants&#32;---------------------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00054"/>00054 
<anchor xml:id="__b_m_i088_8cpp_source_1l00055"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a19136def24f9f6529f7df46c0625acca">00055</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint8_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a19136def24f9f6529f7df46c0625acca">kMaxMultiTransLen</link>&#32;=&#32;8u;
<anchor xml:id="__b_m_i088_8cpp_source_1l00056"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">00056</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint8_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>&#32;=&#32;0x55;
<anchor xml:id="__b_m_i088_8cpp_source_1l00057"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1af1a33535f593f71f8f97bfe690bba84f">00057</link> <emphasis role="keyword">static</emphasis>&#32;uint8_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1af1a33535f593f71f8f97bfe690bba84f">kPaddingData</link>[<link linkend="_namespacehello__world_1_1devices_1_1imu_1a19136def24f9f6529f7df46c0625acca">kMaxMultiTransLen</link>]&#32;=&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00058"/>00058 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>,
<anchor xml:id="__b_m_i088_8cpp_source_1l00059"/>00059 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>,
<anchor xml:id="__b_m_i088_8cpp_source_1l00060"/>00060 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>,
<anchor xml:id="__b_m_i088_8cpp_source_1l00061"/>00061 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>,
<anchor xml:id="__b_m_i088_8cpp_source_1l00062"/>00062 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>,
<anchor xml:id="__b_m_i088_8cpp_source_1l00063"/>00063 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>,
<anchor xml:id="__b_m_i088_8cpp_source_1l00064"/>00064 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>,
<anchor xml:id="__b_m_i088_8cpp_source_1l00065"/>00065 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>,
<anchor xml:id="__b_m_i088_8cpp_source_1l00066"/>00066 };
<anchor xml:id="__b_m_i088_8cpp_source_1l00067"/>00067 
<anchor xml:id="__b_m_i088_8cpp_source_1l00068"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a5a86856961df34d30843390644886532">00068</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a5a86856961df34d30843390644886532">kAccSens</link>[4]&#32;=&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00069"/>00069 &#32;&#32;&#32;&#32;3&#32;*&#32;<link linkend="_namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830">kGravAcc</link>&#32;/&#32;32768,
<anchor xml:id="__b_m_i088_8cpp_source_1l00070"/>00070 &#32;&#32;&#32;&#32;6&#32;*&#32;<link linkend="_namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830">kGravAcc</link>&#32;/&#32;32768,
<anchor xml:id="__b_m_i088_8cpp_source_1l00071"/>00071 &#32;&#32;&#32;&#32;12&#32;*&#32;<link linkend="_namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830">kGravAcc</link>&#32;/&#32;32768,
<anchor xml:id="__b_m_i088_8cpp_source_1l00072"/>00072 &#32;&#32;&#32;&#32;24&#32;*&#32;<link linkend="_namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830">kGravAcc</link>&#32;/&#32;32768,
<anchor xml:id="__b_m_i088_8cpp_source_1l00073"/>00073 };
<anchor xml:id="__b_m_i088_8cpp_source_1l00074"/>00074 
<anchor xml:id="__b_m_i088_8cpp_source_1l00075"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a0ed80ae63f77153e0821addb336446e2">00075</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a0ed80ae63f77153e0821addb336446e2">kGyroSens</link>[5]&#32;=&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00076"/>00076 &#32;&#32;&#32;&#32;2000&#32;*&#32;<link linkend="_namespacehello__world_1aff7ca8b5f1a544cfb645d20c17b2ebcf">kDeg2RadCoff</link>&#32;/&#32;32768,
<anchor xml:id="__b_m_i088_8cpp_source_1l00077"/>00077 &#32;&#32;&#32;&#32;1000&#32;*&#32;<link linkend="_namespacehello__world_1aff7ca8b5f1a544cfb645d20c17b2ebcf">kDeg2RadCoff</link>&#32;/&#32;32768,
<anchor xml:id="__b_m_i088_8cpp_source_1l00078"/>00078 &#32;&#32;&#32;&#32;500&#32;*&#32;<link linkend="_namespacehello__world_1aff7ca8b5f1a544cfb645d20c17b2ebcf">kDeg2RadCoff</link>&#32;/&#32;32768,
<anchor xml:id="__b_m_i088_8cpp_source_1l00079"/>00079 &#32;&#32;&#32;&#32;250&#32;*&#32;<link linkend="_namespacehello__world_1aff7ca8b5f1a544cfb645d20c17b2ebcf">kDeg2RadCoff</link>&#32;/&#32;32768,
<anchor xml:id="__b_m_i088_8cpp_source_1l00080"/>00080 &#32;&#32;&#32;&#32;125&#32;*&#32;<link linkend="_namespacehello__world_1aff7ca8b5f1a544cfb645d20c17b2ebcf">kDeg2RadCoff</link>&#32;/&#32;32768,
<anchor xml:id="__b_m_i088_8cpp_source_1l00081"/>00081 };
<anchor xml:id="__b_m_i088_8cpp_source_1l00082"/>00082 
<anchor xml:id="__b_m_i088_8cpp_source_1l00083"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a27ec247e96dea1a69a25048e94e108ee">00083</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a27ec247e96dea1a69a25048e94e108ee">kTempSens</link>&#32;=&#32;0.125f;
<anchor xml:id="__b_m_i088_8cpp_source_1l00084"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a3ca6e2287a6e1578dcae2f9837721962">00084</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a3ca6e2287a6e1578dcae2f9837721962">kTempOffset</link>&#32;=&#32;23.0f;
<anchor xml:id="__b_m_i088_8cpp_source_1l00085"/>00085 
<anchor xml:id="__b_m_i088_8cpp_source_1l00086"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1af60d7777256f8e7b1383437df9d7c420">00086</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint8_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1af60d7777256f8e7b1383437df9d7c420">kWriteSign</link>&#32;=&#32;0x00;
<anchor xml:id="__b_m_i088_8cpp_source_1l00087"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1aa8d641907aa367b051e7f14cdea8673c">00087</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint8_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1aa8d641907aa367b051e7f14cdea8673c">kReadSign</link>&#32;=&#32;0x80;
<anchor xml:id="__b_m_i088_8cpp_source_1l00088"/>00088 
<anchor xml:id="__b_m_i088_8cpp_source_1l00089"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a3e4baaf9203b036df28de0609668d42f">00089</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint8_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a3e4baaf9203b036df28de0609668d42f">kGyroRawDataLen</link>&#32;=&#32;6u;
<anchor xml:id="__b_m_i088_8cpp_source_1l00090"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a9c07d818a5232e233e78057af4cc4f29">00090</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint8_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a9c07d818a5232e233e78057af4cc4f29">kAccRawDataLen</link>&#32;=&#32;6u;
<anchor xml:id="__b_m_i088_8cpp_source_1l00091"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1ae4969e35172560587100082bfede3aef">00091</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint8_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1ae4969e35172560587100082bfede3aef">kTempRawDataLen</link>&#32;=&#32;2u;
<anchor xml:id="__b_m_i088_8cpp_source_1l00092"/>00092 
<anchor xml:id="__b_m_i088_8cpp_source_1l00093"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a">00093</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint8_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a">kSpiTimeout</link>&#32;=&#32;5u;&#32;&#32;
<anchor xml:id="__b_m_i088_8cpp_source_1l00094"/>00094 
<anchor xml:id="__b_m_i088_8cpp_source_1l00095"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a2892b2630935424b98256bbac46b7c76">00095</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint16_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2892b2630935424b98256bbac46b7c76">kAccResetTime</link>&#32;=&#32;2u;&#32;&#32;
<anchor xml:id="__b_m_i088_8cpp_source_1l00096"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1ae62089d70213a8ed855a551b64eccb53">00096</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint8_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1ae62089d70213a8ed855a551b64eccb53">kGyroResetTime</link>&#32;=&#32;1u;&#32;&#32;
<anchor xml:id="__b_m_i088_8cpp_source_1l00097"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">00097</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint16_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>&#32;=&#32;2u;&#32;&#32;
<anchor xml:id="__b_m_i088_8cpp_source_1l00099"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a2197d124ccde446fa944ac4c53ddca63">00099</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint16_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2197d124ccde446fa944ac4c53ddca63">kCheckWaitTime</link>&#32;=&#32;120u;
<anchor xml:id="__b_m_i088_8cpp_source_1l00100"/>00100 
<anchor xml:id="__b_m_i088_8cpp_source_1l00102"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a4b69bffbbe7c394213f4ba63f4d4e2b7">00102</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint8_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a4b69bffbbe7c394213f4ba63f4d4e2b7">kAccSelfTestShortDelay</link>&#32;=&#32;2u;
<anchor xml:id="__b_m_i088_8cpp_source_1l00104"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a4d1a7ebd52abf9b9b515be763a3e76e2">00104</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;uint8_t&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a4d1a7ebd52abf9b9b515be763a3e76e2">kAccSelfTestLongDelay</link>&#32;=&#32;50u;
<anchor xml:id="__b_m_i088_8cpp_source_1l00105"/>00105 <emphasis role="comment">/*&#32;Private&#32;types&#32;-------------------------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00106"/>00106 <emphasis role="comment">/*&#32;Private&#32;variables&#32;---------------------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00107"/>00107 <emphasis role="comment">/*&#32;External&#32;variables&#32;--------------------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00108"/>00108 <emphasis role="comment">/*&#32;Private&#32;function&#32;prototypes&#32;-----------------------------------------------*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00109"/>00109 
<anchor xml:id="__b_m_i088_8cpp_source_1l00110"/>00110 <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(uint16_t&#32;us);
<anchor xml:id="__b_m_i088_8cpp_source_1l00111"/>00111 
<anchor xml:id="__b_m_i088_8cpp_source_1l00121"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a00b280798b0068e72d0235cd42d9356e">00121</link> <link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a00b280798b0068e72d0235cd42d9356e">BMI088::BMI088</link>(<emphasis role="keyword">const</emphasis>&#32;<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_h_w_config">BMI088HWConfig</link>&#32;&amp;hw_config,&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;rot_mat_flatten[9],
<anchor xml:id="__b_m_i088_8cpp_source_1l00122"/>00122 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">const</emphasis>&#32;<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config">BMI088Config</link>&#32;&amp;config)
<anchor xml:id="__b_m_i088_8cpp_source_1l00123"/>00123 &#32;&#32;&#32;&#32;:&#32;kHspi_(hw_config.hspi),
<anchor xml:id="__b_m_i088_8cpp_source_1l00124"/>00124 &#32;&#32;&#32;&#32;&#32;&#32;kAccCsPort_(hw_config.acc_cs_port),
<anchor xml:id="__b_m_i088_8cpp_source_1l00125"/>00125 &#32;&#32;&#32;&#32;&#32;&#32;kAccCsPin_(hw_config.acc_cs_pin),
<anchor xml:id="__b_m_i088_8cpp_source_1l00126"/>00126 &#32;&#32;&#32;&#32;&#32;&#32;kGyroCsPort_(hw_config.gyro_cs_port),
<anchor xml:id="__b_m_i088_8cpp_source_1l00127"/>00127 &#32;&#32;&#32;&#32;&#32;&#32;kGyroCsPin_(hw_config.gyro_cs_pin),
<anchor xml:id="__b_m_i088_8cpp_source_1l00128"/>00128 &#32;&#32;&#32;&#32;&#32;&#32;config_(config)
<anchor xml:id="__b_m_i088_8cpp_source_1l00129"/>00129 {
<anchor xml:id="__b_m_i088_8cpp_source_1l00130"/>00130 &#32;&#32;<emphasis role="comment">/*&#32;变量检查&#32;*/</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00131"/>00131 <emphasis role="preprocessor">#pragma&#32;region</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00132"/>00132 &#32;&#32;<link linkend="_assert_8hpp_1a5969df827ceb603bed14c4106586484a">HW_ASSERT</link>(IS_SPI_ALL_INSTANCE(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1">kHspi_</link>-&gt;Instance),&#32;<emphasis role="stringliteral">&quot;Error&#32;SPI&#32;handle&quot;</emphasis>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00133"/>00133 &#32;&#32;<link linkend="_assert_8hpp_1a5969df827ceb603bed14c4106586484a">HW_ASSERT</link>(IS_GPIO_ALL_INSTANCE(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ab7d987d8210a4fc77d1f1dfde6c16078">kAccCsPort_</link>),&#32;<emphasis role="stringliteral">&quot;Error&#32;GPIO&#32;port&quot;</emphasis>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00134"/>00134 &#32;&#32;<link linkend="_assert_8hpp_1a5969df827ceb603bed14c4106586484a">HW_ASSERT</link>(IS_GPIO_PIN(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a97361975a2ee31bc272c71f9563c6228">kAccCsPin_</link>),&#32;<emphasis role="stringliteral">&quot;Error&#32;GPIO&#32;pin&quot;</emphasis>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00135"/>00135 &#32;&#32;<link linkend="_assert_8hpp_1a5969df827ceb603bed14c4106586484a">HW_ASSERT</link>(IS_GPIO_ALL_INSTANCE(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa136b76edb5bbfdc16a8ff91ff3c72eb">kGyroCsPort_</link>),&#32;<emphasis role="stringliteral">&quot;Error&#32;GPIO&#32;port&quot;</emphasis>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00136"/>00136 &#32;&#32;<link linkend="_assert_8hpp_1a5969df827ceb603bed14c4106586484a">HW_ASSERT</link>(IS_GPIO_PIN(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a79de225d3923ea4c4ca62a4ef4f9a997">kGyroCsPin_</link>),&#32;<emphasis role="stringliteral">&quot;Error&#32;GPIO&#32;pin&quot;</emphasis>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00137"/>00137 &#32;&#32;<link linkend="_assert_8hpp_1a5969df827ceb603bed14c4106586484a">HW_ASSERT</link>(rot_mat_flatten,&#32;<emphasis role="stringliteral">&quot;Empty&#32;rotation&#32;matrix&quot;</emphasis>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00138"/>00138 &#32;&#32;<link linkend="_assert_8hpp_1a5969df827ceb603bed14c4106586484a">HW_ASSERT</link>(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1aab5503ee855c9842317e46e340365a75">acc_range</link>&#32;&gt;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a1b5968572f4f140f70490c0056a7ad98a60f26b746398fa69d4839af8785af59d">kBMI088AccRange3G</link>&#32;&amp;&amp;
<anchor xml:id="__b_m_i088_8cpp_source_1l00139"/>00139 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1aab5503ee855c9842317e46e340365a75">acc_range</link>&#32;&lt;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a1b5968572f4f140f70490c0056a7ad98a5dc50ec716a376d1442bdbf138496785">kBMI088AccRange24G</link>,
<anchor xml:id="__b_m_i088_8cpp_source_1l00140"/>00140 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;Error&#32;Acc&#32;range:&#32;%d&quot;</emphasis>,&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1aab5503ee855c9842317e46e340365a75">acc_range</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00141"/>00141 &#32;&#32;<link linkend="_assert_8hpp_1a5969df827ceb603bed14c4106586484a">HW_ASSERT</link>(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9556cba51bda73a37924cd057682b2b3">acc_odr</link>&#32;&gt;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a4150d082933f50162a992c3a351f6497a62071bd8c96ef5f22eb6d8d90f160552">kBMI088AccOdr12_5</link>&#32;&amp;&amp;
<anchor xml:id="__b_m_i088_8cpp_source_1l00142"/>00142 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9556cba51bda73a37924cd057682b2b3">acc_odr</link>&#32;&lt;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a4150d082933f50162a992c3a351f6497ac55c2b705876e73e883aa1b0a536dff8">kBMI088AccOdr1600</link>,
<anchor xml:id="__b_m_i088_8cpp_source_1l00143"/>00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;Error&#32;Acc&#32;ODR:&#32;%d&quot;</emphasis>,&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9556cba51bda73a37924cd057682b2b3">acc_odr</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00144"/>00144 &#32;&#32;<link linkend="_assert_8hpp_1a5969df827ceb603bed14c4106586484a">HW_ASSERT</link>(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9241fa656593bed0c006c95f42cd5d65">acc_osr</link>&#32;&gt;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1ac55ed4d468583311a38f1efe25e41020a8e20eec26346459cc412490744d64c87">kBMI088AccOsr4</link>&#32;&amp;&amp;
<anchor xml:id="__b_m_i088_8cpp_source_1l00145"/>00145 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9241fa656593bed0c006c95f42cd5d65">acc_osr</link>&#32;&lt;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1ac55ed4d468583311a38f1efe25e41020af20f8ca81b3be175c3d94cd3735fb513">kBMI088AccOsrNormal</link>,
<anchor xml:id="__b_m_i088_8cpp_source_1l00146"/>00146 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;Error&#32;Acc&#32;OSR:&#32;%d&quot;</emphasis>,&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9241fa656593bed0c006c95f42cd5d65">acc_osr</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00147"/>00147 &#32;&#32;<link linkend="_assert_8hpp_1a5969df827ceb603bed14c4106586484a">HW_ASSERT</link>(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a971c0dc188f60ebd746e5016abeec630">gyro_range</link>&#32;&gt;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a5f381963a5f36b0ad90316482c9fd6e2ac740d3d399a74eca878975759f08ad1c">kBMI088GyroRange2000Dps</link>&#32;&amp;&amp;
<anchor xml:id="__b_m_i088_8cpp_source_1l00148"/>00148 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a971c0dc188f60ebd746e5016abeec630">gyro_range</link>&#32;&lt;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a5f381963a5f36b0ad90316482c9fd6e2a1ea96fa03944afd1a30fce6c876cb8da">kBMI088GyroRange125Dps</link>,
<anchor xml:id="__b_m_i088_8cpp_source_1l00149"/>00149 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;Error&#32;Gyro&#32;range:&#32;%d&quot;</emphasis>,&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a971c0dc188f60ebd746e5016abeec630">gyro_range</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00150"/>00150 &#32;&#32;<link linkend="_assert_8hpp_1a5969df827ceb603bed14c4106586484a">HW_ASSERT</link>(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a5bc01ce6575fd795b95b4ace89c7d3e2">gyro_odr_fbw</link>&#32;&gt;=&#32;BMI088GyroOdrFbw2000_532&#32;&amp;&amp;
<anchor xml:id="__b_m_i088_8cpp_source_1l00151"/>00151 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a5bc01ce6575fd795b95b4ace89c7d3e2">gyro_odr_fbw</link>&#32;&lt;=&#32;BMI088GyroOdrFbw100_32,
<anchor xml:id="__b_m_i088_8cpp_source_1l00152"/>00152 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;Error&#32;Gyro&#32;ODR&#32;and&#32;FBW:&#32;%d&quot;</emphasis>,&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a5bc01ce6575fd795b95b4ace89c7d3e2">gyro_odr_fbw</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00153"/>00153 <emphasis role="preprocessor">#pragma&#32;endregion</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00154"/>00154 
<anchor xml:id="__b_m_i088_8cpp_source_1l00155"/>00155 &#32;&#32;memcpy(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac603be31b6c63d3fc61f4221a8491981">rot_mat_flatten_</link>,&#32;rot_mat_flatten,&#32;<emphasis role="keyword">sizeof</emphasis>(<emphasis role="keywordtype">float</emphasis>)&#32;*&#32;9);
<anchor xml:id="__b_m_i088_8cpp_source_1l00156"/>00156 &#32;&#32;arm_mat_init_f32(&amp;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a350b375718e7d004bdbf618b63cca8c5">rot_mat_</link>,&#32;3,&#32;3,&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac603be31b6c63d3fc61f4221a8491981">rot_mat_flatten_</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00157"/>00157 
<anchor xml:id="__b_m_i088_8cpp_source_1l00158"/>00158 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1abe2be687095fa7b54d31a3a69693b306">accCsH</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00159"/>00159 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a54cd103bad13c06059088197dabd6acc">gyroCsH</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00160"/>00160 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00161"/>00161 
<anchor xml:id="__b_m_i088_8cpp_source_1l00168"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a623a7d90db0585ea45bac12fd3d19061">00168</link> <link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf">BMI088ErrState</link>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a623a7d90db0585ea45bac12fd3d19061">BMI088::init</link>(<emphasis role="keywordtype">bool</emphasis>&#32;self_test)<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00169"/>00169 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00170"/>00170 &#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf">BMI088ErrState</link>&#32;err_state&#32;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f">kBMI088ErrStateNoErr</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00171"/>00171 
<anchor xml:id="__b_m_i088_8cpp_source_1l00172"/>00172 &#32;&#32;err_state&#32;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf">BMI088ErrState</link>(err_state&#32;|&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a88754aa2ebac6fcdfde4c5ce4de33dd6">gyroInit</link>(self_test));
<anchor xml:id="__b_m_i088_8cpp_source_1l00173"/>00173 &#32;&#32;err_state&#32;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf">BMI088ErrState</link>(err_state&#32;|&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1af18363d9dd6de94e4961ce1772923483">accInit</link>(self_test));
<anchor xml:id="__b_m_i088_8cpp_source_1l00174"/>00174 
<anchor xml:id="__b_m_i088_8cpp_source_1l00175"/>00175 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;err_state;
<anchor xml:id="__b_m_i088_8cpp_source_1l00176"/>00176 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00177"/>00177 
<anchor xml:id="__b_m_i088_8cpp_source_1l00186"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa4b8ef9d615c0ead67e6b88c34bd84d1">00186</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa4b8ef9d615c0ead67e6b88c34bd84d1">BMI088::getData</link>(<emphasis role="keywordtype">float</emphasis>&#32;acc_data[3],&#32;<emphasis role="keywordtype">float</emphasis>&#32;gyro_data[3],&#32;<emphasis role="keywordtype">float</emphasis>&#32;*temp_ptr)<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00187"/>00187 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00188"/>00188 &#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;tmp_data[3];
<anchor xml:id="__b_m_i088_8cpp_source_1l00189"/>00189 
<anchor xml:id="__b_m_i088_8cpp_source_1l00190"/>00190 &#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(acc_data&#32;!=&#32;<emphasis role="keyword">nullptr</emphasis>)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00191"/>00191 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00192"/>00192 &#32;&#32;&#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad236f84f69a0ef4e8befa96479bf5618">getAccData</link>(tmp_data);
<anchor xml:id="__b_m_i088_8cpp_source_1l00193"/>00193 &#32;&#32;&#32;&#32;arm_mat_vec_mult_f32(&amp;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a350b375718e7d004bdbf618b63cca8c5">rot_mat_</link>,&#32;tmp_data,&#32;acc_data);
<anchor xml:id="__b_m_i088_8cpp_source_1l00194"/>00194 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00195"/>00195 
<anchor xml:id="__b_m_i088_8cpp_source_1l00196"/>00196 &#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(gyro_data&#32;!=&#32;<emphasis role="keyword">nullptr</emphasis>)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00197"/>00197 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00198"/>00198 &#32;&#32;&#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a00755ad04aebc2df220b39f1a83bf811">getGyroData</link>(tmp_data);
<anchor xml:id="__b_m_i088_8cpp_source_1l00199"/>00199 &#32;&#32;&#32;&#32;arm_mat_vec_mult_f32(&amp;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a350b375718e7d004bdbf618b63cca8c5">rot_mat_</link>,&#32;tmp_data,&#32;gyro_data);
<anchor xml:id="__b_m_i088_8cpp_source_1l00200"/>00200 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00201"/>00201 
<anchor xml:id="__b_m_i088_8cpp_source_1l00202"/>00202 &#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(temp_ptr&#32;!=&#32;<emphasis role="keyword">nullptr</emphasis>)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00203"/>00203 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00204"/>00204 &#32;&#32;&#32;&#32;*temp_ptr&#32;=&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0672cec3591e037942c7bc03b31dd24a">getTemp</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00205"/>00205 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00206"/>00206 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00207"/>00207 
<anchor xml:id="__b_m_i088_8cpp_source_1l00214"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1af18363d9dd6de94e4961ce1772923483">00214</link> <link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf">BMI088ErrState</link>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1af18363d9dd6de94e4961ce1772923483">BMI088::accInit</link>(<emphasis role="keywordtype">bool</emphasis>&#32;self_test)<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00215"/>00215 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00216"/>00216 &#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00217"/>00217 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a">accRead</link>(<link linkend="__b_m_i088__reg_8hpp_1a464aa60f701f4fcb2207e84e938f02a8">BMI088_ACC_ACC_CHIP_ID</link>);&#32;&#32;<emphasis role="comment">//&#32;假读取</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00218"/>00218 
<anchor xml:id="__b_m_i088_8cpp_source_1l00219"/>00219 &#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00220"/>00220 &#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a">accRead</link>(<link linkend="__b_m_i088__reg_8hpp_1a464aa60f701f4fcb2207e84e938f02a8">BMI088_ACC_ACC_CHIP_ID</link>)&#32;!=&#32;<link linkend="__b_m_i088__reg_8hpp_1ae97c06f96a3ca343e2708d55802245dc">BMI088_ACC_ACC_CHIP_ID_VALUE</link>)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00221"/>00221 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa33f5d7685272e1454b0a839318a1c155">kBMI088ErrStateAccNotFound</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00222"/>00222 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00223"/>00223 
<anchor xml:id="__b_m_i088_8cpp_source_1l00224"/>00224 &#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(self_test)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00225"/>00225 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bc81c0ed908d469d3c0bde126a80311">accSelfTest</link>()&#32;!=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f">kBMI088ErrStateNoErr</link>)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00226"/>00226 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa1fd3e7bba87b31d71a08e2b72646a3fd">kBMI088ErrStateAccSelfTestFailed</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00227"/>00227 &#32;&#32;&#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00228"/>00228 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00229"/>00229 
<anchor xml:id="__b_m_i088_8cpp_source_1l00230"/>00230 &#32;&#32;<emphasis role="comment">//&#32;配置一些寄存器</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00231"/>00231 &#32;&#32;uint8_t&#32;acc_conf&#32;=&#32;(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9241fa656593bed0c006c95f42cd5d65">acc_osr</link>&#32;&lt;&lt;&#32;<link linkend="__b_m_i088__reg_8hpp_1ad03c3c6ec3173b33c2c8be77fa0e2361">_BMI088_ACC_ACC_CONF_ACC_OSR_SHFITS</link>)&#32;|
<anchor xml:id="__b_m_i088_8cpp_source_1l00232"/>00232 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a9556cba51bda73a37924cd057682b2b3">acc_odr</link>&#32;&lt;&lt;&#32;<link linkend="__b_m_i088__reg_8hpp_1af197c0a05dc07ed26712932ce7cb2f13">_BMI088_ACC_ACC_CONF_ACC_ODR_SHFITS</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00233"/>00233 &#32;&#32;uint8_t&#32;acc_init_config[4][2]&#32;=&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00234"/>00234 &#32;&#32;&#32;&#32;&#32;&#32;{<link linkend="__b_m_i088__reg_8hpp_1a94d04d0a52dc93fe34ab0d90146fa1fa">BMI088_ACC_ACC_RANGE</link>,&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1aab5503ee855c9842317e46e340365a75">acc_range</link>},
<anchor xml:id="__b_m_i088_8cpp_source_1l00235"/>00235 &#32;&#32;&#32;&#32;&#32;&#32;{<link linkend="__b_m_i088__reg_8hpp_1a6cabbe16234ea294944c1681d349ad37">BMI088_ACC_ACC_CONF</link>,&#32;acc_conf},
<anchor xml:id="__b_m_i088_8cpp_source_1l00236"/>00236 &#32;&#32;&#32;&#32;&#32;&#32;{<link linkend="__b_m_i088__reg_8hpp_1a9514af79d27808ca77f49de37741d1a5">BMI088_ACC_ACC_PWR_CTRL</link>,&#32;<link linkend="__b_m_i088__reg_8hpp_1ac8d38427f08bb2343ce5b25093c5072c">BMI088_ACC_ACC_PWR_CTRL_ON</link>},
<anchor xml:id="__b_m_i088_8cpp_source_1l00237"/>00237 &#32;&#32;&#32;&#32;&#32;&#32;{<link linkend="__b_m_i088__reg_8hpp_1a97197867ec26383f3558215b851a573d">BMI088_ACC_ACC_PWR_CONF</link>,&#32;<link linkend="__b_m_i088__reg_8hpp_1a0a896d645a713eb6150404fa64efb4bb">BMI088_ACC_ACC_PWR_CONF_ACTIVE_MODE</link>}};
<anchor xml:id="__b_m_i088_8cpp_source_1l00238"/>00238 
<anchor xml:id="__b_m_i088_8cpp_source_1l00239"/>00239 &#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00240"/>00240 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59">accWrite</link>(<link linkend="__b_m_i088__reg_8hpp_1a7a96d84044869e1006f5dde9df656076">BMI088_ACC_ACC_SOFTRESET</link>,&#32;<link linkend="__b_m_i088__reg_8hpp_1a2403e8b99e3128494b9be2828de1b5f7">BMI088_ACC_ACC_SOFTRESET_VALUE</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00241"/>00241 &#32;&#32;HAL_Delay(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2892b2630935424b98256bbac46b7c76">kAccResetTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00242"/>00242 
<anchor xml:id="__b_m_i088_8cpp_source_1l00243"/>00243 &#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00244"/>00244 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a">accRead</link>(<link linkend="__b_m_i088__reg_8hpp_1a464aa60f701f4fcb2207e84e938f02a8">BMI088_ACC_ACC_CHIP_ID</link>);&#32;&#32;<emphasis role="comment">//&#32;假读取</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00245"/>00245 
<anchor xml:id="__b_m_i088_8cpp_source_1l00246"/>00246 &#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(uint8_t&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;4;&#32;i++)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00247"/>00247 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00248"/>00248 &#32;&#32;&#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59">accWrite</link>(acc_init_config[i][0],&#32;acc_init_config[i][1]);
<anchor xml:id="__b_m_i088_8cpp_source_1l00249"/>00249 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2197d124ccde446fa944ac4c53ddca63">kCheckWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00250"/>00250 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a">accRead</link>(acc_init_config[i][0])&#32;!=&#32;acc_init_config[i][1])&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00251"/>00251 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa3275cd83116cc9f6625817cfad14a433">kBMI088ErrStateAccConfigErr</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00252"/>00252 &#32;&#32;&#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00253"/>00253 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00254"/>00254 
<anchor xml:id="__b_m_i088_8cpp_source_1l00255"/>00255 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f">kBMI088ErrStateNoErr</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00256"/>00256 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00257"/>00257 
<anchor xml:id="__b_m_i088_8cpp_source_1l00264"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a88754aa2ebac6fcdfde4c5ce4de33dd6">00264</link> <link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf">BMI088ErrState</link>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a88754aa2ebac6fcdfde4c5ce4de33dd6">BMI088::gyroInit</link>(<emphasis role="keywordtype">bool</emphasis>&#32;self_test)<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00265"/>00265 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00266"/>00266 &#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00267"/>00267 &#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a16b8a6609a3b902bc05c4e2857801cd2">gyroRead</link>(<link linkend="__b_m_i088__reg_8hpp_1a111dfc62522a55fdb1913f6162a3ddfa">BMI088_GYRO_GYRO_CHIP_ID</link>)&#32;!=&#32;<link linkend="__b_m_i088__reg_8hpp_1aa3ba99a02a11fd7bdcb3c235c070f588">BMI088_GYRO_GYRO_CHIP_ID_VALUE</link>)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00268"/>00268 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafaf36788cb829d6f706bbfc614d824e1bf">kBMI088ErrStateGyroNotFound</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00269"/>00269 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00270"/>00270 
<anchor xml:id="__b_m_i088_8cpp_source_1l00271"/>00271 &#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(self_test)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00272"/>00272 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac8c0c2e64b56c3feb6888446b4830be3">gyroSelfTest</link>()&#32;!=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f">kBMI088ErrStateNoErr</link>)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00273"/>00273 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa5ac7ace53ccf983ab0f56f8e09fb4290">kBMI088ErrStateGyroSelfTestFailed</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00274"/>00274 &#32;&#32;&#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00275"/>00275 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00276"/>00276 
<anchor xml:id="__b_m_i088_8cpp_source_1l00277"/>00277 &#32;&#32;<emphasis role="comment">//&#32;配置一些寄存器</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00278"/>00278 &#32;&#32;uint8_t&#32;gyro_bandwidth&#32;=&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a5bc01ce6575fd795b95b4ace89c7d3e2">gyro_odr_fbw</link>&#32;|
<anchor xml:id="__b_m_i088_8cpp_source_1l00279"/>00279 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__b_m_i088__reg_8hpp_1ac0b5c42bc668a4f1d4e701d916fceca2">BMI088_GYRO_GYRO_BANDWIDTH_MUST_SET</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00280"/>00280 &#32;&#32;uint8_t&#32;gyro_init_config[3][2]&#32;=&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00281"/>00281 &#32;&#32;&#32;&#32;&#32;&#32;{<link linkend="__b_m_i088__reg_8hpp_1adae803e32838eeeba32504566993e5e4">BMI088_GYRO_GYRO_RANGE</link>,&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a971c0dc188f60ebd746e5016abeec630">gyro_range</link>},
<anchor xml:id="__b_m_i088_8cpp_source_1l00282"/>00282 &#32;&#32;&#32;&#32;&#32;&#32;{<link linkend="__b_m_i088__reg_8hpp_1a49b1f262ca24421b6f1c6a28131629d5">BMI088_GYRO_GYRO_BANDWIDTH</link>,&#32;gyro_bandwidth},
<anchor xml:id="__b_m_i088_8cpp_source_1l00283"/>00283 &#32;&#32;&#32;&#32;&#32;&#32;{<link linkend="__b_m_i088__reg_8hpp_1a555699e12c1fc0a97363fe6881208a68">BMI088_GYRO_GYRO_LPM1</link>,&#32;<link linkend="__b_m_i088__reg_8hpp_1ada1a723751c84658bd35bb53f6133662">BMI088_GYRO_GYRO_LPM1_NORMAL</link>}};
<anchor xml:id="__b_m_i088_8cpp_source_1l00284"/>00284 &#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00285"/>00285 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1adf2ebc011e80e2ad115716307c773c6f">gyroWrite</link>(<link linkend="__b_m_i088__reg_8hpp_1a5eea1e216988cdde51d47d1ef7b302b6">BMI088_GYRO_GYRO_SOFTRESET</link>,&#32;<link linkend="__b_m_i088__reg_8hpp_1a6e0561366a94c357b65a0d73315aff16">BMI088_GYRO_GYRO_SOFTRESET_VALUE</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00286"/>00286 &#32;&#32;HAL_Delay(<link linkend="_namespacehello__world_1_1devices_1_1imu_1ae62089d70213a8ed855a551b64eccb53">kGyroResetTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00287"/>00287 
<anchor xml:id="__b_m_i088_8cpp_source_1l00288"/>00288 &#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(uint8_t&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;3;&#32;i++)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00289"/>00289 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00290"/>00290 &#32;&#32;&#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1adf2ebc011e80e2ad115716307c773c6f">gyroWrite</link>(gyro_init_config[i][0],&#32;gyro_init_config[i][1]);
<anchor xml:id="__b_m_i088_8cpp_source_1l00291"/>00291 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2197d124ccde446fa944ac4c53ddca63">kCheckWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00292"/>00292 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a16b8a6609a3b902bc05c4e2857801cd2">gyroRead</link>(gyro_init_config[i][0])&#32;!=&#32;gyro_init_config[i][1])&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00293"/>00293 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafaa325e1db5049d081cd037fe9d8c642f3">kBMI088ErrStateGyroConfigErr</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00294"/>00294 &#32;&#32;&#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00295"/>00295 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00296"/>00296 
<anchor xml:id="__b_m_i088_8cpp_source_1l00297"/>00297 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f">kBMI088ErrStateNoErr</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00298"/>00298 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00299"/>00299 
<anchor xml:id="__b_m_i088_8cpp_source_1l00305"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bc81c0ed908d469d3c0bde126a80311">00305</link> <link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf">BMI088ErrState</link>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bc81c0ed908d469d3c0bde126a80311">BMI088::accSelfTest</link>(<emphasis role="keywordtype">void</emphasis>)<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00306"/>00306 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00307"/>00307 &#32;&#32;uint8_t&#32;acc_init_config[4][2]&#32;=&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00308"/>00308 &#32;&#32;&#32;&#32;&#32;&#32;{<link linkend="__b_m_i088__reg_8hpp_1a94d04d0a52dc93fe34ab0d90146fa1fa">BMI088_ACC_ACC_RANGE</link>,&#32;<link linkend="__b_m_i088__reg_8hpp_1aca7dfd7218302e42090dea77fa023e28">BMI088_ACC_ACC_RANGE_ACC_RANGE_24G</link>},
<anchor xml:id="__b_m_i088_8cpp_source_1l00309"/>00309 &#32;&#32;&#32;&#32;&#32;&#32;{<link linkend="__b_m_i088__reg_8hpp_1a6cabbe16234ea294944c1681d349ad37">BMI088_ACC_ACC_CONF</link>,&#32;<link linkend="__b_m_i088__reg_8hpp_1a9a8e968b02a3089e7d227f16497c3e67">BMI088_ACC_ACC_CONF_NORMAL</link>&#32;|
<anchor xml:id="__b_m_i088_8cpp_source_1l00310"/>00310 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__b_m_i088__reg_8hpp_1a419eade8e4337034ab30c6b1c774323c">BMI088_ACC_ACC_CONF_ACC_ODR_1600_HZ</link>},
<anchor xml:id="__b_m_i088_8cpp_source_1l00311"/>00311 &#32;&#32;&#32;&#32;&#32;&#32;{<link linkend="__b_m_i088__reg_8hpp_1a9514af79d27808ca77f49de37741d1a5">BMI088_ACC_ACC_PWR_CTRL</link>,&#32;<link linkend="__b_m_i088__reg_8hpp_1ac8d38427f08bb2343ce5b25093c5072c">BMI088_ACC_ACC_PWR_CTRL_ON</link>},
<anchor xml:id="__b_m_i088_8cpp_source_1l00312"/>00312 &#32;&#32;&#32;&#32;&#32;&#32;{<link linkend="__b_m_i088__reg_8hpp_1a97197867ec26383f3558215b851a573d">BMI088_ACC_ACC_PWR_CONF</link>,&#32;<link linkend="__b_m_i088__reg_8hpp_1a0a896d645a713eb6150404fa64efb4bb">BMI088_ACC_ACC_PWR_CONF_ACTIVE_MODE</link>}};
<anchor xml:id="__b_m_i088_8cpp_source_1l00313"/>00313 
<anchor xml:id="__b_m_i088_8cpp_source_1l00314"/>00314 &#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(uint8_t&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;4;&#32;i++)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00315"/>00315 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00316"/>00316 &#32;&#32;&#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59">accWrite</link>(acc_init_config[i][0],&#32;acc_init_config[i][1]);
<anchor xml:id="__b_m_i088_8cpp_source_1l00317"/>00317 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2197d124ccde446fa944ac4c53ddca63">kCheckWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00318"/>00318 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a">accRead</link>(acc_init_config[i][0])&#32;!=&#32;acc_init_config[i][1])&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00319"/>00319 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa1fd3e7bba87b31d71a08e2b72646a3fd">kBMI088ErrStateAccSelfTestFailed</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00320"/>00320 &#32;&#32;&#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00321"/>00321 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00322"/>00322 
<anchor xml:id="__b_m_i088_8cpp_source_1l00323"/>00323 &#32;&#32;HAL_Delay(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a4b69bffbbe7c394213f4ba63f4d4e2b7">kAccSelfTestShortDelay</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00324"/>00324 
<anchor xml:id="__b_m_i088_8cpp_source_1l00325"/>00325 &#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;pos_self_test_data[3],&#32;neg_self_test_data[3];
<anchor xml:id="__b_m_i088_8cpp_source_1l00326"/>00326 
<anchor xml:id="__b_m_i088_8cpp_source_1l00327"/>00327 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59">accWrite</link>(<link linkend="__b_m_i088__reg_8hpp_1ab5c7deeed8f250205c297a07fc4290f7">BMI088_ACC_ACC_SELF_TEST</link>,&#32;<link linkend="__b_m_i088__reg_8hpp_1aba28bf598e3474800d22a64fd1e347db">BMI088_ACC_ACC_SELF_TEST_POSITIVE_SIGNAL</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00328"/>00328 &#32;&#32;HAL_Delay(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a4d1a7ebd52abf9b9b515be763a3e76e2">kAccSelfTestLongDelay</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00329"/>00329 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad236f84f69a0ef4e8befa96479bf5618">getAccData</link>(pos_self_test_data);
<anchor xml:id="__b_m_i088_8cpp_source_1l00330"/>00330 
<anchor xml:id="__b_m_i088_8cpp_source_1l00331"/>00331 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59">accWrite</link>(<link linkend="__b_m_i088__reg_8hpp_1ab5c7deeed8f250205c297a07fc4290f7">BMI088_ACC_ACC_SELF_TEST</link>,&#32;<link linkend="__b_m_i088__reg_8hpp_1a2265bb0e8d006b3b60943df8bfaf96e3">BMI088_ACC_ACC_SELF_TEST_NEGATIVE_SIGNAL</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00332"/>00332 &#32;&#32;HAL_Delay(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a4d1a7ebd52abf9b9b515be763a3e76e2">kAccSelfTestLongDelay</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00333"/>00333 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad236f84f69a0ef4e8befa96479bf5618">getAccData</link>(neg_self_test_data);
<anchor xml:id="__b_m_i088_8cpp_source_1l00334"/>00334 
<anchor xml:id="__b_m_i088_8cpp_source_1l00335"/>00335 &#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;min_diff_thres[3]&#32;=&#32;{<link linkend="_namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830">kGravAcc</link>,&#32;<link linkend="_namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830">kGravAcc</link>,&#32;0.5&#32;*&#32;<link linkend="_namespacehello__world_1a8582e15cc16c32ad80a0d6873cf3f830">kGravAcc</link>};
<anchor xml:id="__b_m_i088_8cpp_source_1l00336"/>00336 &#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(uint8_t&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;3;&#32;i++)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00337"/>00337 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(pos_self_test_data[i]&#32;-&#32;neg_self_test_data[i]&#32;&lt;&#32;min_diff_thres[i])&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00338"/>00338 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa1fd3e7bba87b31d71a08e2b72646a3fd">kBMI088ErrStateAccSelfTestFailed</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00339"/>00339 &#32;&#32;&#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00340"/>00340 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00341"/>00341 
<anchor xml:id="__b_m_i088_8cpp_source_1l00342"/>00342 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f">kBMI088ErrStateNoErr</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00343"/>00343 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00344"/>00344 
<anchor xml:id="__b_m_i088_8cpp_source_1l00350"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac8c0c2e64b56c3feb6888446b4830be3">00350</link> <link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6faf">BMI088ErrState</link>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac8c0c2e64b56c3feb6888446b4830be3">BMI088::gyroSelfTest</link>(<emphasis role="keywordtype">void</emphasis>)<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00351"/>00351 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00352"/>00352 &#32;&#32;<emphasis role="comment">//&#32;配置一些寄存器</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00353"/>00353 &#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00354"/>00354 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1adf2ebc011e80e2ad115716307c773c6f">gyroWrite</link>(<link linkend="__b_m_i088__reg_8hpp_1a7b45feecb36446f0279f158a238c29ad">BMI088_GYRO_GYRO_SELF_TEST</link>,&#32;<link linkend="__b_m_i088__reg_8hpp_1a3c76e6933674ba4a69aa92b378e9f3f5">BMI088_GYRO_GYRO_SELF_TEST_TRIG_BIST</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00355"/>00355 
<anchor xml:id="__b_m_i088_8cpp_source_1l00356"/>00356 &#32;&#32;uint8_t&#32;test_result;
<anchor xml:id="__b_m_i088_8cpp_source_1l00357"/>00357 &#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(1)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00358"/>00358 &#32;&#32;&#32;&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(<link linkend="_namespacehello__world_1_1devices_1_1imu_1a2c70146ac241152592c8643c2ddbd571">kCommWaitTime</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00359"/>00359 &#32;&#32;&#32;&#32;test_result&#32;=&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a16b8a6609a3b902bc05c4e2857801cd2">gyroRead</link>(<link linkend="__b_m_i088__reg_8hpp_1a7b45feecb36446f0279f158a238c29ad">BMI088_GYRO_GYRO_SELF_TEST</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00360"/>00360 
<anchor xml:id="__b_m_i088_8cpp_source_1l00361"/>00361 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(test_result&#32;&amp;&#32;<link linkend="__b_m_i088__reg_8hpp_1a38ae947f46e410c98768b4284f4c2799">BMI088_GYRO_GYRO_SELF_TEST_BIST_RDY</link>)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00362"/>00362 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(test_result&#32;&amp;&#32;<link linkend="__b_m_i088__reg_8hpp_1a70daf67398f8b8f91a4e437b696c8826">BMI088_GYRO_GYRO_SELF_TEST_BIST_FAIL</link>)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00363"/>00363 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa5ac7ace53ccf983ab0f56f8e09fb4290">kBMI088ErrStateGyroSelfTestFailed</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00364"/>00364 &#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00365"/>00365 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afc65bae6cff924c06f3f762a196d6fafa2145833ba5262dcb4896c6452f5ef83f">kBMI088ErrStateNoErr</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00366"/>00366 &#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00367"/>00367 &#32;&#32;&#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00368"/>00368 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00369"/>00369 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00370"/>00370 
<anchor xml:id="__b_m_i088_8cpp_source_1l00377"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a00755ad04aebc2df220b39f1a83bf811">00377</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a00755ad04aebc2df220b39f1a83bf811">BMI088::getGyroData</link>(<emphasis role="keywordtype">float</emphasis>&#32;gyro_data[3])<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00378"/>00378 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00379"/>00379 &#32;&#32;uint8_t&#32;gyro_raw_data[<link linkend="_namespacehello__world_1_1devices_1_1imu_1a3e4baaf9203b036df28de0609668d42f">kGyroRawDataLen</link>];
<anchor xml:id="__b_m_i088_8cpp_source_1l00380"/>00380 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a443cf9b8f3e44acea8ac21258b4d7363">gyroMultiRead</link>(<link linkend="__b_m_i088__reg_8hpp_1a59395733e43e82b15084d632dce434b0">BMI088_GYRO_RATE_X_LSB</link>,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a3e4baaf9203b036df28de0609668d42f">kGyroRawDataLen</link>,&#32;gyro_raw_data);
<anchor xml:id="__b_m_i088_8cpp_source_1l00381"/>00381 
<anchor xml:id="__b_m_i088_8cpp_source_1l00382"/>00382 &#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(uint8_t&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;3;&#32;i++)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00383"/>00383 &#32;&#32;&#32;&#32;gyro_data[i]&#32;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a0ed80ae63f77153e0821addb336446e2">kGyroSens</link>[<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1a971c0dc188f60ebd746e5016abeec630">gyro_range</link>]&#32;*
<anchor xml:id="__b_m_i088_8cpp_source_1l00384"/>00384 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static_cast&lt;</emphasis>int16_t<emphasis role="keyword">&gt;</emphasis>(
<anchor xml:id="__b_m_i088_8cpp_source_1l00385"/>00385 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;gyro_raw_data[2&#32;*&#32;i]&#32;|&#32;gyro_raw_data[2&#32;*&#32;i&#32;+&#32;1]&#32;&lt;&lt;&#32;8);
<anchor xml:id="__b_m_i088_8cpp_source_1l00386"/>00386 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00387"/>00387 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00388"/>00388 
<anchor xml:id="__b_m_i088_8cpp_source_1l00395"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad236f84f69a0ef4e8befa96479bf5618">00395</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad236f84f69a0ef4e8befa96479bf5618">BMI088::getAccData</link>(<emphasis role="keywordtype">float</emphasis>&#32;acc_data[3])<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00396"/>00396 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00397"/>00397 &#32;&#32;uint8_t&#32;acc_raw_data[<link linkend="_namespacehello__world_1_1devices_1_1imu_1a9c07d818a5232e233e78057af4cc4f29">kAccRawDataLen</link>];
<anchor xml:id="__b_m_i088_8cpp_source_1l00398"/>00398 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad8bdc7c9eee4bb3c35ee8467df9e49ae">accMultiRead</link>(<link linkend="__b_m_i088__reg_8hpp_1a3de924f591b6e8b05d2b2ee2e12f1da5">BMI088_ACC_ACC_X_LSB</link>,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a9c07d818a5232e233e78057af4cc4f29">kAccRawDataLen</link>,&#32;acc_raw_data);
<anchor xml:id="__b_m_i088_8cpp_source_1l00399"/>00399 
<anchor xml:id="__b_m_i088_8cpp_source_1l00400"/>00400 &#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(uint8_t&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;3;&#32;i++)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00401"/>00401 &#32;&#32;&#32;&#32;acc_data[i]&#32;=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a5a86856961df34d30843390644886532">kAccSens</link>[<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1aa93aefcfca4698ac808d528ad032f73a">config_</link>.<link linkend="_structhello__world_1_1devices_1_1imu_1_1_b_m_i088_config_1aab5503ee855c9842317e46e340365a75">acc_range</link>]&#32;*
<anchor xml:id="__b_m_i088_8cpp_source_1l00402"/>00402 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static_cast&lt;</emphasis>int16_t<emphasis role="keyword">&gt;</emphasis>(
<anchor xml:id="__b_m_i088_8cpp_source_1l00403"/>00403 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;acc_raw_data[2&#32;*&#32;i]&#32;|&#32;acc_raw_data[2&#32;*&#32;i&#32;+&#32;1]&#32;&lt;&lt;&#32;8);
<anchor xml:id="__b_m_i088_8cpp_source_1l00404"/>00404 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00405"/>00405 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00406"/>00406 
<anchor xml:id="__b_m_i088_8cpp_source_1l00412"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0672cec3591e037942c7bc03b31dd24a">00412</link> <emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0672cec3591e037942c7bc03b31dd24a">BMI088::getTemp</link>(<emphasis role="keywordtype">void</emphasis>)<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00413"/>00413 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00414"/>00414 &#32;&#32;uint8_t&#32;temp_raw_data[<link linkend="_namespacehello__world_1_1devices_1_1imu_1ae4969e35172560587100082bfede3aef">kTempRawDataLen</link>];
<anchor xml:id="__b_m_i088_8cpp_source_1l00415"/>00415 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad8bdc7c9eee4bb3c35ee8467df9e49ae">accMultiRead</link>(<link linkend="__b_m_i088__reg_8hpp_1a40bf07cf7605757e9ff4e2b73c5e118a">BMI088_ACC_TEMP_MSB</link>,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1ae4969e35172560587100082bfede3aef">kTempRawDataLen</link>,&#32;temp_raw_data);
<anchor xml:id="__b_m_i088_8cpp_source_1l00416"/>00416 
<anchor xml:id="__b_m_i088_8cpp_source_1l00417"/>00417 &#32;&#32;int16_t&#32;temp_raw&#32;=
<anchor xml:id="__b_m_i088_8cpp_source_1l00418"/>00418 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static_cast&lt;</emphasis>uint16_t<emphasis role="keyword">&gt;</emphasis>((temp_raw_data[0]&#32;&lt;&lt;&#32;<link linkend="__b_m_i088__reg_8hpp_1a1601f0939849a170124bf8ab523b0d9b">_BMI088_ACC_TEMP_MSB_SHIFTS</link>)&#32;|
<anchor xml:id="__b_m_i088_8cpp_source_1l00419"/>00419 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;(temp_raw_data[1]&#32;&gt;&gt;&#32;<link linkend="__b_m_i088__reg_8hpp_1a7f4d5277e5d124b71a7fb47eb9c3773b">_BMI088_ACC_TEMP_LSB_SHIFTS</link>));
<anchor xml:id="__b_m_i088_8cpp_source_1l00420"/>00420 
<anchor xml:id="__b_m_i088_8cpp_source_1l00421"/>00421 &#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(temp_raw&#32;&gt;&#32;1023)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00422"/>00422 &#32;&#32;&#32;&#32;temp_raw&#32;-=&#32;2048;
<anchor xml:id="__b_m_i088_8cpp_source_1l00423"/>00423 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00424"/>00424 
<anchor xml:id="__b_m_i088_8cpp_source_1l00425"/>00425 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;temp_raw&#32;*&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a27ec247e96dea1a69a25048e94e108ee">kTempSens</link>&#32;+&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a3ca6e2287a6e1578dcae2f9837721962">kTempOffset</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00426"/>00426 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00427"/>00427 
<anchor xml:id="__b_m_i088_8cpp_source_1l00435"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1adf2ebc011e80e2ad115716307c773c6f">00435</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1adf2ebc011e80e2ad115716307c773c6f">BMI088::gyroWrite</link>(uint8_t&#32;mem_addr,&#32;uint8_t&#32;value)<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00436"/>00436 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00437"/>00437 &#32;&#32;uint8_t&#32;tx_data[2]&#32;=&#32;{mem_addr&#32;|=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1af60d7777256f8e7b1383437df9d7c420">kWriteSign</link>,&#32;value};
<anchor xml:id="__b_m_i088_8cpp_source_1l00438"/>00438 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac7e428dbf85a72f9b9689a78e7e73f02">gyroCsL</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00439"/>00439 &#32;&#32;HAL_SPI_Transmit(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1">kHspi_</link>,&#32;tx_data,&#32;2,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a">kSpiTimeout</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00440"/>00440 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a54cd103bad13c06059088197dabd6acc">gyroCsH</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00441"/>00441 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00442"/>00442 
<anchor xml:id="__b_m_i088_8cpp_source_1l00449"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a16b8a6609a3b902bc05c4e2857801cd2">00449</link> uint8_t&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a16b8a6609a3b902bc05c4e2857801cd2">BMI088::gyroRead</link>(uint8_t&#32;mem_addr)<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00450"/>00450 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00451"/>00451 &#32;&#32;uint8_t&#32;rx_data[2],&#32;tx_data[2]&#32;=&#32;{mem_addr&#32;|=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1aa8d641907aa367b051e7f14cdea8673c">kReadSign</link>,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>};
<anchor xml:id="__b_m_i088_8cpp_source_1l00452"/>00452 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac7e428dbf85a72f9b9689a78e7e73f02">gyroCsL</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00453"/>00453 &#32;&#32;HAL_SPI_TransmitReceive(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1">kHspi_</link>,&#32;tx_data,&#32;rx_data,&#32;2,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a">kSpiTimeout</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00454"/>00454 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a54cd103bad13c06059088197dabd6acc">gyroCsH</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00455"/>00455 
<anchor xml:id="__b_m_i088_8cpp_source_1l00456"/>00456 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;rx_data[1];
<anchor xml:id="__b_m_i088_8cpp_source_1l00457"/>00457 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00458"/>00458 
<anchor xml:id="__b_m_i088_8cpp_source_1l00467"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a443cf9b8f3e44acea8ac21258b4d7363">00467</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a443cf9b8f3e44acea8ac21258b4d7363">BMI088::gyroMultiRead</link>(
<anchor xml:id="__b_m_i088_8cpp_source_1l00468"/>00468 &#32;&#32;&#32;&#32;uint8_t&#32;start_mem_addr,&#32;uint8_t&#32;len,&#32;uint8_t&#32;rx_data[])<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00469"/>00469 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00470"/>00470 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ac7e428dbf85a72f9b9689a78e7e73f02">gyroCsL</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00471"/>00471 &#32;&#32;start_mem_addr&#32;|=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1aa8d641907aa367b051e7f14cdea8673c">kReadSign</link>;
<anchor xml:id="__b_m_i088_8cpp_source_1l00472"/>00472 &#32;&#32;HAL_SPI_Transmit(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1">kHspi_</link>,&#32;&amp;start_mem_addr,&#32;1,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a">kSpiTimeout</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00473"/>00473 &#32;&#32;HAL_SPI_TransmitReceive(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1">kHspi_</link>,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1af1a33535f593f71f8f97bfe690bba84f">kPaddingData</link>,&#32;rx_data,&#32;len,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a">kSpiTimeout</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00474"/>00474 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a54cd103bad13c06059088197dabd6acc">gyroCsH</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00475"/>00475 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00476"/>00476 
<anchor xml:id="__b_m_i088_8cpp_source_1l00484"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59">00484</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a7bbb5b66f79a9d0d40edf7f809743d59">BMI088::accWrite</link>(uint8_t&#32;mem_addr,&#32;uint8_t&#32;value)<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00485"/>00485 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00486"/>00486 &#32;&#32;uint8_t&#32;pTxData[2]&#32;=&#32;{mem_addr&#32;|=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1af60d7777256f8e7b1383437df9d7c420">kWriteSign</link>,&#32;value};
<anchor xml:id="__b_m_i088_8cpp_source_1l00487"/>00487 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad1ea4fa147f8bb2da18049c229404f65">accCsL</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00488"/>00488 &#32;&#32;HAL_SPI_Transmit(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1">kHspi_</link>,&#32;pTxData,&#32;2,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a">kSpiTimeout</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00489"/>00489 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1abe2be687095fa7b54d31a3a69693b306">accCsH</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00490"/>00490 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00491"/>00491 
<anchor xml:id="__b_m_i088_8cpp_source_1l00498"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a">00498</link> uint8_t&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a3d46ca9f969584dbbc7060a0665edd0a">BMI088::accRead</link>(uint8_t&#32;mem_addr)<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00499"/>00499 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00500"/>00500 &#32;&#32;uint8_t&#32;rx_data[3],&#32;tx_data[3]&#32;=&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00501"/>00501 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;mem_addr&#32;|=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1aa8d641907aa367b051e7f14cdea8673c">kReadSign</link>,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>};
<anchor xml:id="__b_m_i088_8cpp_source_1l00502"/>00502 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad1ea4fa147f8bb2da18049c229404f65">accCsL</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00503"/>00503 &#32;&#32;HAL_SPI_TransmitReceive(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1">kHspi_</link>,&#32;tx_data,&#32;rx_data,&#32;3,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a">kSpiTimeout</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00504"/>00504 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1abe2be687095fa7b54d31a3a69693b306">accCsH</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00505"/>00505 
<anchor xml:id="__b_m_i088_8cpp_source_1l00506"/>00506 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;rx_data[2];
<anchor xml:id="__b_m_i088_8cpp_source_1l00507"/>00507 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00508"/>00508 
<anchor xml:id="__b_m_i088_8cpp_source_1l00517"/><link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad8bdc7c9eee4bb3c35ee8467df9e49ae">00517</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad8bdc7c9eee4bb3c35ee8467df9e49ae">BMI088::accMultiRead</link>(
<anchor xml:id="__b_m_i088_8cpp_source_1l00518"/>00518 &#32;&#32;&#32;&#32;uint8_t&#32;start_mem_addr,&#32;uint8_t&#32;len,&#32;uint8_t&#32;rx_data[])<emphasis role="keyword">&#32;const</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00519"/>00519 <emphasis role="keyword"></emphasis>{
<anchor xml:id="__b_m_i088_8cpp_source_1l00520"/>00520 &#32;&#32;uint8_t&#32;tx_data[2]&#32;=&#32;{start_mem_addr&#32;|=&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1aa8d641907aa367b051e7f14cdea8673c">kReadSign</link>,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a56a2243330f6d9b007aae341d01b6f29">kPaddingValue</link>};
<anchor xml:id="__b_m_i088_8cpp_source_1l00521"/>00521 
<anchor xml:id="__b_m_i088_8cpp_source_1l00522"/>00522 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1ad1ea4fa147f8bb2da18049c229404f65">accCsL</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00523"/>00523 &#32;&#32;HAL_SPI_TransmitReceive(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1">kHspi_</link>,&#32;tx_data,&#32;rx_data,&#32;2,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a">kSpiTimeout</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00524"/>00524 &#32;&#32;HAL_SPI_TransmitReceive(<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1a0ee5a0515702e260c800cf20c3a64fe1">kHspi_</link>,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1af1a33535f593f71f8f97bfe690bba84f">kPaddingData</link>,&#32;rx_data,&#32;len,&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1afd57b9ff2061310de106415ffdb4888a">kSpiTimeout</link>);
<anchor xml:id="__b_m_i088_8cpp_source_1l00525"/>00525 &#32;&#32;<link linkend="_classhello__world_1_1devices_1_1imu_1_1_b_m_i088_1abe2be687095fa7b54d31a3a69693b306">accCsH</link>();
<anchor xml:id="__b_m_i088_8cpp_source_1l00526"/>00526 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00527"/>00527 
<anchor xml:id="__b_m_i088_8cpp_source_1l00534"/><link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">00534</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_namespacehello__world_1_1devices_1_1imu_1a6fc8717b2ca9de9512855bad4d226769">DelayUs</link>(uint16_t&#32;us)
<anchor xml:id="__b_m_i088_8cpp_source_1l00535"/>00535 {
<anchor xml:id="__b_m_i088_8cpp_source_1l00536"/>00536 &#32;&#32;uint32_t&#32;reload&#32;=&#32;SysTick-&gt;LOAD;
<anchor xml:id="__b_m_i088_8cpp_source_1l00537"/>00537 &#32;&#32;uint32_t&#32;ticks&#32;=&#32;us&#32;*&#32;(SystemCoreClock&#32;/&#32;1e6f);
<anchor xml:id="__b_m_i088_8cpp_source_1l00538"/>00538 &#32;&#32;uint32_t&#32;t_last&#32;=&#32;SysTick-&gt;VAL;
<anchor xml:id="__b_m_i088_8cpp_source_1l00539"/>00539 
<anchor xml:id="__b_m_i088_8cpp_source_1l00540"/>00540 &#32;&#32;uint32_t&#32;t_now&#32;=&#32;0;
<anchor xml:id="__b_m_i088_8cpp_source_1l00541"/>00541 &#32;&#32;uint32_t&#32;t_cnt&#32;=&#32;0;
<anchor xml:id="__b_m_i088_8cpp_source_1l00542"/>00542 
<anchor xml:id="__b_m_i088_8cpp_source_1l00543"/>00543 &#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(t_cnt&#32;&lt;&#32;ticks)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00544"/>00544 &#32;&#32;&#32;&#32;t_now&#32;=&#32;SysTick-&gt;VAL;
<anchor xml:id="__b_m_i088_8cpp_source_1l00545"/>00545 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(t_now&#32;!=&#32;t_last)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00546"/>00546 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(t_now&#32;&lt;&#32;t_last)&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00547"/>00547 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;t_cnt&#32;+=&#32;t_last&#32;-&#32;t_now;
<anchor xml:id="__b_m_i088_8cpp_source_1l00548"/>00548 &#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
<anchor xml:id="__b_m_i088_8cpp_source_1l00549"/>00549 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;t_cnt&#32;+=&#32;reload&#32;-&#32;t_now&#32;+&#32;t_last;
<anchor xml:id="__b_m_i088_8cpp_source_1l00550"/>00550 &#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00551"/>00551 &#32;&#32;&#32;&#32;&#32;&#32;t_last&#32;=&#32;t_now;
<anchor xml:id="__b_m_i088_8cpp_source_1l00552"/>00552 &#32;&#32;&#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00553"/>00553 &#32;&#32;}
<anchor xml:id="__b_m_i088_8cpp_source_1l00554"/>00554 }
<anchor xml:id="__b_m_i088_8cpp_source_1l00555"/>00555 }&#32;&#32;<emphasis role="comment">//&#32;namespace&#32;imu</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00556"/>00556 }&#32;&#32;<emphasis role="comment">//&#32;namespace&#32;devices</emphasis>
<anchor xml:id="__b_m_i088_8cpp_source_1l00557"/>00557 }&#32;&#32;<emphasis role="comment">//&#32;namespace&#32;hello_world</emphasis>
</programlisting></section>
